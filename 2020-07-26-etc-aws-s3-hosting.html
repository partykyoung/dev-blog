<!DOCTYPE html><html lang="ko" class="__variable_66f45d __variable_9320b3 __variable_c331f0"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/45cca0c1391027f2-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/47cbc4e2adbc5db9-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/c97d4358b5ad6f1f-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/b432f2368e6fb937.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/1b0517c55006ee9e.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/ca8a8c70aedbb578.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/d3c42565bf5a0151.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-916d3cf9079c5391.js"/><script src="/_next/static/chunks/57e98ef8-25e167db504120c8.js" async=""></script><script src="/_next/static/chunks/552-57c01bdfec40c067.js" async=""></script><script src="/_next/static/chunks/main-app-4067f73eff77431b.js" async=""></script><script src="/_next/static/chunks/378-5bf6c9ea599618fb.js" async=""></script><script src="/_next/static/chunks/46-5e590dde3c59d1a1.js" async=""></script><script src="/_next/static/chunks/71-79248221d46a3079.js" async=""></script><script src="/_next/static/chunks/app/layout-f7cbf492592b1d12.js" async=""></script><script src="/_next/static/chunks/app/%5Bslug%5D/page-57dc53ae6d0ba992.js" async=""></script><meta name="next-size-adjust" content=""/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><header class="ohcd230"><div class="ohcd231"><a href="/"><img alt="dev.kyoungah.me" loading="lazy" decoding="async" data-nimg="1" class="ohcd232" style="color:transparent" sizes="100vw" srcSet="/_next/image?url=%2Fimages%2Flogo.png&amp;w=640&amp;q=75 640w, /_next/image?url=%2Fimages%2Flogo.png&amp;w=750&amp;q=75 750w, /_next/image?url=%2Fimages%2Flogo.png&amp;w=828&amp;q=75 828w, /_next/image?url=%2Fimages%2Flogo.png&amp;w=1080&amp;q=75 1080w, /_next/image?url=%2Fimages%2Flogo.png&amp;w=1200&amp;q=75 1200w, /_next/image?url=%2Fimages%2Flogo.png&amp;w=1920&amp;q=75 1920w, /_next/image?url=%2Fimages%2Flogo.png&amp;w=2048&amp;q=75 2048w, /_next/image?url=%2Fimages%2Flogo.png&amp;w=3840&amp;q=75 3840w" src="/_next/image?url=%2Fimages%2Flogo.png&amp;w=3840&amp;q=75"/></a><nav><ul class="ohcd233"><li class="ohcd234"><a class="ohcd235" href="/tags"><img alt="Tags" loading="lazy" decoding="async" data-nimg="1" class="ohcd236" style="color:transparent" src="/svgs/tag.svg"/><span class="ohcd237">Tags</span></a></li><li class="ohcd234"><a class="ohcd235" href="/about"><img alt="About" loading="lazy" decoding="async" data-nimg="1" class="ohcd236" style="color:transparent" src="/svgs/person.svg"/><span class="ohcd237">About</span></a></li></ul></nav></div></header><div class="container"><div class="_1g6gzzm0"><h1 class="post-detail-module_h1__iVVvj _1g6gzzm1">React 프로젝트 AWS S3, CloudFront에 배포하기</h1><span class="_1g6gzzm2">2020.07.27</span><ul class="tags-module_tags__r6foZ _1g6gzzm3"><li class="tags-module_tag__EODVP tags-module_tag-md__WIDM8 _1g6gzzm4">AWS</li></ul></div><h2 class="post-detail-module_h2__EwHhX">AWS S3</h2>
<p class="post-detail-module_p__Aa2B9"><a class="post-detail-module_link__GIS41" href="https://aws.amazon.com/ko/s3/">AWS S3(Simple Storage Service)</a>는 인터넷상 어디서나 원하는 양의 데이터를 저장하고 검색할 수 있도록 구축된 객체 스토리지 서비스이다. 확장성과 가용성이 뛰어나며 모든 S3 객체의 복사본을 자동으로 생성하고 저장하기 때문에 높은 내구성을 보장한다. 사용한 스토리지 만큼 요금이 청구된다.</p>
<h3 class="post-detail-module_h3__LqBWz">객체</h3>
<ul class="post-detail-module_ul__MqZiO">
<li class="post-detail-module_li__Xzqkr">S3에 저장되는 기본 개체.</li>
<li class="post-detail-module_li__Xzqkr">S3에 저장된 데이터 하나하나를 객체라고 명명한다.</li>
<li class="post-detail-module_li__Xzqkr">데이터와 키, 메타데이터로 구성된다.<!-- -->
<ul class="post-detail-module_ul__MqZiO">
<li class="post-detail-module_li__Xzqkr">키는 객체에 지정한 이름이다. 버킷 내 객체를 고유하게 식별하며 키를 사용하여 객체를 검색한다.</li>
<li class="post-detail-module_li__Xzqkr">메타데이터는 객체를 설명하는 이름-값 페어의 집합이다.</li>
</ul>
</li>
</ul>
<h3 class="post-detail-module_h3__LqBWz">버킷</h3>
<ul class="post-detail-module_ul__MqZiO">
<li class="post-detail-module_li__Xzqkr">S3에 저장된 객체에 대한 컨테이너.<!-- -->
<ul class="post-detail-module_ul__MqZiO">
<li class="post-detail-module_li__Xzqkr">객체가 파일이라면 버킷은 연관된 객체들을 그룹핑한 최상위 디렉토리라고 할 수 있다.</li>
</ul>
</li>
<li class="post-detail-module_li__Xzqkr">모든 객체는 버킷에 포함된다.</li>
<li class="post-detail-module_li__Xzqkr">S3에 데이터를 업로드하려면 우선 하나의 AWS 리전에 S3 버킷을 만들어야 한다.</li>
<li class="post-detail-module_li__Xzqkr">버킷에 포함된 모든 객체에 대해서 일괄적으로 인증과 접속 제한을 걸 수 있다.</li>
</ul>
<h2 class="post-detail-module_h2__EwHhX">AWS S3로 정적 웹사이트 호스팅 하기</h2>
<p class="post-detail-module_p__Aa2B9">S3는 단순히 데이터 저장 뿐만 아니라 여러가지 부가 기능을 제공한다. 그 중 하나가 정적 웹사이트 호스팅이다.</p>
<p class="post-detail-module_p__Aa2B9">S3에 버킷을 생성한 후 해당 버킷을 웹 사이트 호스팅용로 구성한 후 HTML, css, JavaScript 파일 같은 웹 사이트 콘텐츠를 버킷에 업로드하면 S3로 정적 웹 사이트를 호스팅할 수 있다.</p>
<p class="post-detail-module_p__Aa2B9">토이 프로젝트로 작업하고 있는 React 프로젝트가 있는데 이것을 S3에 한번 태워보자.</p>
<h3 class="post-detail-module_h3__LqBWz">IAM 권한 추가</h3>
<p class="post-detail-module_p__Aa2B9">React 프로젝트를 빌드 한후 s3에 접속하여 웹 호스팅용 버킷에 직접 웹 사이트 콘텐츠들을 직접 업로드 해도 되지만 AWS CLI를 사용하여 스크립트 만으로 간단하게 빌드 및 배포를 완료할 수 있다.</p>
<p class="post-detail-module_p__Aa2B9">AWS CLI로 작업을 하기 위해선 AWS CLI에 액세스 할 수 있도록 IAM 권한이 필요하다. 그래서 IAM 권한 설정을 먼저 해주기로 했다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="AWS 서비스 메뉴" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-iam-1.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-iam-1.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">AWS 서비스 메뉴</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">먼저 AWS 서비스 검색창에서 IAM을 검색하거나 서비스 메뉴에서 IAM 항목을 찾아 클릭하여 IAM 대시보드 창으로 이동한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="IAM 대시보드" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-1.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-1.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">IAM 대시보드</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">IAM 대시보드 메뉴에서 사용자 항목을 클릭한 후 사용자 추가 버튼을 클릭한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="IAM 사용자 추가" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-2.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-2.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">IAM 사용자 추가</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">사용자 이름을 입력한 후 액세스 유형으로 프로그래밍 방식 액세스를 선택한다. 액세스키만 필요하기 때문에 프로그래밍 방식 액세스를 선택하면 된다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="IAM 사용자 권한 설정" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-3.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-3.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">IAM 사용자 권한 설정</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">기존 정책 직접 연결 항목을 선택한 후 S3를 검색하여 AmazonS3FullAccess 권한을 선택해준다. AmazonS3FullAccess 권한은 S3에 관한 모든 사용권한을 부여한다.</p>
<p class="post-detail-module_p__Aa2B9">권한 설정이 완료 되었으면 다음 버튼을 눌러준다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="IAM 사용자 태그 추가" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-4.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-4.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">IAM 사용자 태그 추가</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">태그 추가는 필수가 아니므로 그냥 넘어가도 된다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="IAM 사용자 추가 검토" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-5.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-5.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">IAM 사용자 추가 검토</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">마지막으로 제대로 이름을 입력하고 권한을 부여했는지 한번 더 검토한 후 사용자 버튼을 클릭한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="IAM 사용자 추가 완료" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-6.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-6.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">IAM 사용자 추가 완료</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">IAM 사용자 추가가 완료 되었다. 액세스 키 ID와 비밀 액세스 키는 AWS CLI 설정 시 꼭 필요하기 때문에 csv 다운로드로 파일을 저장해놓거나 어딘가에 기록해놓자. 비밀 액세스 키는 절대로 외부에 노출되면 안된다.</p>
<h3 class="post-detail-module_h3__LqBWz">AWS CLI 설정</h3>
<p class="post-detail-module_p__Aa2B9">이제 AWS CLI 설치 및 설정이 필요하다. AWS CLI는 <a class="post-detail-module_link__GIS41" href="https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/install-cliv2.html">AWS 설치메뉴얼 문서</a>에서 설치할 수 있다.</p>
<div class="kh48qt0 expressive-code"><style>.expressive-code{font-family:var(--ec-uiFontFml);font-size:var(--ec-uiFontSize);font-weight:var(--ec-uiFontWg);line-height:var(--ec-uiLineHt);text-size-adjust:none;-webkit-text-size-adjust:none}.expressive-code *:not(:is(svg, svg *)){all:revert;box-sizing:border-box}.expressive-code pre{display:flex;margin:0;padding:0;border:var(--ec-brdWd) solid var(--ec-brdCol);border-radius:calc(var(--ec-brdRad) + var(--ec-brdWd));background:var(--ec-codeBg)}.expressive-code pre:focus-visible{outline:3px solid var(--ec-focusBrd);outline-offset:-3px}.expressive-code pre > code{all:unset;display:block;flex:1 0 100%;padding:var(--ec-codePadBlk) 0;color:var(--ec-codeFg);font-family:var(--ec-codeFontFml);font-size:var(--ec-codeFontSize);font-weight:var(--ec-codeFontWg);line-height:var(--ec-codeLineHt)}.expressive-code pre{overflow-x:auto}.expressive-code pre.wrap .ec-line .code{white-space:pre-wrap;overflow-wrap:break-word;min-width:min(20ch, var(--ecMaxLine, 20ch))}.expressive-code pre.wrap .ec-line .code span.indent{white-space:pre}.expressive-code pre::-webkit-scrollbar,.expressive-code pre::-webkit-scrollbar-track{background-color:inherit;border-radius:calc(var(--ec-brdRad) + var(--ec-brdWd));border-top-left-radius:0;border-top-right-radius:0}.expressive-code pre::-webkit-scrollbar-thumb{background-color:var(--ec-sbThumbCol);border:4px solid transparent;background-clip:content-box;border-radius:10px}.expressive-code pre::-webkit-scrollbar-thumb:hover{background-color:var(--ec-sbThumbHoverCol)}.expressive-code .ec-line{direction:ltr;unicode-bidi:isolate;display:grid;grid-template-areas:'gutter code';grid-template-columns:auto 1fr;position:relative}.expressive-code .ec-line .gutter{grid-area:gutter;color:var(--ec-gtrFg)}.expressive-code .ec-line .gutter > *{pointer-events:none;user-select:none;-webkit-user-select:none}.expressive-code .ec-line .gutter ~ .code{--ecLineBrdCol:var(--ec-gtrBrdCol)}.expressive-code .ec-line.highlight .gutter{color:var(--ec-gtrHlFg)}.expressive-code .ec-line .code{grid-area:code;position:relative;box-sizing:content-box;padding-inline-start:calc(var(--ecIndent, 0ch) + var(--ec-codePadInl) - var(--ecGtrBrdWd));padding-inline-end:var(--ec-codePadInl);text-indent:calc(var(--ecIndent, 0ch) * -1)}.expressive-code .ec-line .code::before,.expressive-code .ec-line .code::after,.expressive-code .ec-line .code :where(*){text-indent:0}.expressive-code .ec-line .code{--ecGtrBrdWd:var(--ec-gtrBrdWd);border-inline-start:var(--ecGtrBrdWd) solid var(--ecLineBrdCol, transparent)}.expressive-code .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.expressive-code .ec-line.mark{--tmLineBgCol:var(--ec-tm-markBg)}.expressive-code .ec-line.mark .code{--ecLineBrdCol:var(--ec-tm-markBrdCol)}.expressive-code .ec-line.ins{--tmLineBgCol:var(--ec-tm-insBg);--tmLabel:var(--ec-tm-insDiffIndContent)}.expressive-code .ec-line.ins .code{--ecLineBrdCol:var(--ec-tm-insBrdCol)}.expressive-code .ec-line.ins .code::before{color:var(--ec-tm-insDiffIndCol)}.expressive-code .ec-line.del{--tmLineBgCol:var(--ec-tm-delBg);--tmLabel:var(--ec-tm-delDiffIndContent)}.expressive-code .ec-line.del .code{--ecLineBrdCol:var(--ec-tm-delBrdCol)}.expressive-code .ec-line.del .code::before{color:var(--ec-tm-delDiffIndCol)}.expressive-code .ec-line.mark,.expressive-code .ec-line.ins,.expressive-code .ec-line.del{background:var(--tmLineBgCol)}.expressive-code .ec-line.mark .code,.expressive-code .ec-line.ins .code,.expressive-code .ec-line.del .code{--ecGtrBrdWd:var(--ec-tm-lineMarkerAccentWd)}.expressive-code .ec-line.mark .code::before,.expressive-code .ec-line.ins .code::before,.expressive-code .ec-line.del .code::before{display:block;position:absolute;left:0;box-sizing:border-box;content:var(--tmLabel, ' ');padding-inline-start:var(--ec-tm-lineDiffIndMargLeft);text-align:center;white-space:pre}.expressive-code .ec-line.mark.tm-label .code::before,.expressive-code .ec-line.ins.tm-label .code::before,.expressive-code .ec-line.del.tm-label .code::before{background:var(--ecLineBrdCol);padding:0 calc(var(--ec-tm-lineMarkerLabelPadInl) + var(--ec-tm-lineMarkerAccentWd)) 0 var(--ec-tm-lineMarkerLabelPadInl);color:var(--ec-tm-lineMarkerLabelCol)}.expressive-code .ec-line mark{--tmInlineBgCol:var(--ec-tm-markBg);--tmInlineBrdCol:var(--ec-tm-markBrdCol)}.expressive-code .ec-line ins{--tmInlineBgCol:var(--ec-tm-insBg);--tmInlineBrdCol:var(--ec-tm-insBrdCol)}.expressive-code .ec-line del{--tmInlineBgCol:var(--ec-tm-delBg);--tmInlineBrdCol:var(--ec-tm-delBrdCol)}.expressive-code .ec-line mark,.expressive-code .ec-line ins,.expressive-code .ec-line del{all:unset;display:inline-block;position:relative;--tmBrdL:var(--ec-tm-inlMarkerBrdWd);--tmBrdR:var(--ec-tm-inlMarkerBrdWd);--tmRadL:var(--ec-tm-inlMarkerBrdRad);--tmRadR:var(--ec-tm-inlMarkerBrdRad);margin-inline:0.025rem;padding-inline:var(--ec-tm-inlMarkerPad);border-radius:var(--tmRadL) var(--tmRadR) var(--tmRadR) var(--tmRadL);background:var(--tmInlineBgCol);background-clip:padding-box}.expressive-code .ec-line mark.open-start,.expressive-code .ec-line ins.open-start,.expressive-code .ec-line del.open-start{margin-inline-start:0;padding-inline-start:0;--tmBrdL:0px;--tmRadL:0}.expressive-code .ec-line mark.open-end,.expressive-code .ec-line ins.open-end,.expressive-code .ec-line del.open-end{margin-inline-end:0;padding-inline-end:0;--tmBrdR:0px;--tmRadR:0}.expressive-code .ec-line mark::before,.expressive-code .ec-line ins::before,.expressive-code .ec-line del::before{content:'';position:absolute;pointer-events:none;display:inline-block;inset:0;border-radius:var(--tmRadL) var(--tmRadR) var(--tmRadR) var(--tmRadL);border:var(--ec-tm-inlMarkerBrdWd) solid var(--tmInlineBrdCol);border-inline-width:var(--tmBrdL) var(--tmBrdR)}.expressive-code .frame{all:unset;position:relative;display:block;--header-border-radius:calc(var(--ec-brdRad) + var(--ec-brdWd));--tab-border-radius:calc(var(--ec-frm-edTabBrdRad) + var(--ec-brdWd));--button-spacing:0.4rem;--code-background:var(--ec-frm-edBg);border-radius:var(--header-border-radius);box-shadow:var(--ec-frm-frameBoxShdCssVal)}.expressive-code .frame .header{display:none;z-index:1;position:relative;border-radius:var(--header-border-radius) var(--header-border-radius) 0 0}.expressive-code .frame.has-title pre,.expressive-code .frame.has-title code,.expressive-code .frame.is-terminal pre,.expressive-code .frame.is-terminal code{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.expressive-code .frame .title:empty:before{content:'\a0'}.expressive-code .frame.has-title:not(.is-terminal){--button-spacing:calc(1.9rem + 2 * (var(--ec-uiPadBlk) + var(--ec-frm-edActTabIndHt)))}.expressive-code .frame.has-title:not(.is-terminal) .title{position:relative;color:var(--ec-frm-edActTabFg);background:var(--ec-frm-edActTabBg);background-clip:padding-box;margin-block-start:var(--ec-frm-edTabsMargBlkStart);padding:calc(var(--ec-uiPadBlk) + var(--ec-frm-edActTabIndHt)) var(--ec-uiPadInl);border:var(--ec-brdWd) solid var(--ec-frm-edActTabBrdCol);border-radius:var(--tab-border-radius) var(--tab-border-radius) 0 0;border-bottom:none;overflow:hidden}.expressive-code .frame.has-title:not(.is-terminal) .title::after{content:'';position:absolute;pointer-events:none;inset:0;border-top:var(--ec-frm-edActTabIndHt) solid var(--ec-frm-edActTabIndTopCol);border-bottom:var(--ec-frm-edActTabIndHt) solid var(--ec-frm-edActTabIndBtmCol)}.expressive-code .frame.has-title:not(.is-terminal) .header{display:flex;background:linear-gradient(to top, var(--ec-frm-edTabBarBrdBtmCol) var(--ec-brdWd), transparent var(--ec-brdWd)),linear-gradient(var(--ec-frm-edTabBarBg), var(--ec-frm-edTabBarBg));background-repeat:no-repeat;padding-inline-start:var(--ec-frm-edTabsMargInlStart)}.expressive-code .frame.has-title:not(.is-terminal) .header::before{content:'';position:absolute;pointer-events:none;inset:0;border:var(--ec-brdWd) solid var(--ec-frm-edTabBarBrdCol);border-radius:inherit;border-bottom:none}.expressive-code .frame.is-terminal{--button-spacing:calc(1.9rem + var(--ec-brdWd) + 2 * var(--ec-uiPadBlk));--code-background:var(--ec-frm-trmBg)}.expressive-code .frame.is-terminal .header{display:flex;align-items:center;justify-content:center;padding-block:var(--ec-uiPadBlk);padding-block-end:calc(var(--ec-uiPadBlk) + var(--ec-brdWd));position:relative;font-weight:500;letter-spacing:0.025ch;color:var(--ec-frm-trmTtbFg);background:var(--ec-frm-trmTtbBg);border:var(--ec-brdWd) solid var(--ec-brdCol);border-bottom:none}.expressive-code .frame.is-terminal .header::before{content:'';position:absolute;pointer-events:none;left:var(--ec-uiPadInl);width:2.1rem;height:0.56rem;line-height:0;background-color:var(--ec-frm-trmTtbDotsFg);opacity:var(--ec-frm-trmTtbDotsOpa);-webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 60 16' preserveAspectRatio='xMidYMid meet'%3E%3Ccircle cx='8' cy='8' r='8'/%3E%3Ccircle cx='30' cy='8' r='8'/%3E%3Ccircle cx='52' cy='8' r='8'/%3E%3C/svg%3E");-webkit-mask-repeat:no-repeat;mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 60 16' preserveAspectRatio='xMidYMid meet'%3E%3Ccircle cx='8' cy='8' r='8'/%3E%3Ccircle cx='30' cy='8' r='8'/%3E%3Ccircle cx='52' cy='8' r='8'/%3E%3C/svg%3E");mask-repeat:no-repeat}.expressive-code .frame.is-terminal .header::after{content:'';position:absolute;pointer-events:none;inset:0;border-bottom:var(--ec-brdWd) solid var(--ec-frm-trmTtbBrdBtmCol)}.expressive-code .frame pre{background:var(--code-background)}.expressive-code .copy{display:flex;gap:0.25rem;flex-direction:row;position:absolute;inset-block-start:calc(var(--ec-brdWd) + var(--button-spacing));inset-inline-end:calc(var(--ec-brdWd) + var(--ec-uiPadInl) / 2)}@media (scripting: none){.expressive-code .copy{display:none}}.expressive-code .copy{direction:ltr;unicode-bidi:isolate}.expressive-code .copy button{position:relative;align-self:flex-end;margin:0;padding:0;border:none;border-radius:0.2rem;z-index:1;cursor:pointer;transition-property:opacity, background, border-color;transition-duration:0.2s;transition-timing-function:cubic-bezier(0.25, 0.46, 0.45, 0.94);width:2.5rem;height:2.5rem;background:var(--code-background);opacity:0.75}.expressive-code .copy button div{position:absolute;inset:0;border-radius:inherit;background:var(--ec-frm-inlBtnBg);opacity:var(--ec-frm-inlBtnBgIdleOpa);transition-property:inherit;transition-duration:inherit;transition-timing-function:inherit}.expressive-code .copy button::before{content:'';position:absolute;pointer-events:none;inset:0;border-radius:inherit;border:var(--ec-brdWd) solid var(--ec-frm-inlBtnBrd);opacity:var(--ec-frm-inlBtnBrdOpa)}.expressive-code .copy button::after{content:'';position:absolute;pointer-events:none;inset:0;background-color:var(--ec-frm-inlBtnFg);-webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='1.75'%3E%3Cpath d='M3 19a2 2 0 0 1-1-2V2a2 2 0 0 1 1-1h13a2 2 0 0 1 2 1'/%3E%3Crect x='6' y='5' width='16' height='18' rx='1.5' ry='1.5'/%3E%3C/svg%3E");-webkit-mask-repeat:no-repeat;mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='1.75'%3E%3Cpath d='M3 19a2 2 0 0 1-1-2V2a2 2 0 0 1 1-1h13a2 2 0 0 1 2 1'/%3E%3Crect x='6' y='5' width='16' height='18' rx='1.5' ry='1.5'/%3E%3C/svg%3E");mask-repeat:no-repeat;margin:0.475rem;line-height:0}.expressive-code .copy button:hover,.expressive-code .copy button:focus:focus-visible{opacity:1}.expressive-code .copy button:hover div,.expressive-code .copy button:focus:focus-visible div{opacity:var(--ec-frm-inlBtnBgHoverOrFocusOpa)}.expressive-code .copy button:active{opacity:1}.expressive-code .copy button:active div{opacity:var(--ec-frm-inlBtnBgActOpa)}.expressive-code .copy .feedback{--tooltip-arrow-size:0.35rem;--tooltip-bg:var(--ec-frm-tooltipSuccessBg);color:var(--ec-frm-tooltipSuccessFg);pointer-events:none;user-select:none;-webkit-user-select:none;position:relative;align-self:center;background-color:var(--tooltip-bg);z-index:99;padding:0.125rem 0.75rem;border-radius:0.2rem;margin-inline-end:var(--tooltip-arrow-size);opacity:0;transition-property:opacity, transform;transition-duration:0.2s;transition-timing-function:ease-in-out;transform:translate3d(0, 0.25rem, 0)}.expressive-code .copy .feedback::after{content:'';position:absolute;pointer-events:none;top:calc(50% - var(--tooltip-arrow-size));inset-inline-end:calc(-2 * (var(--tooltip-arrow-size) - 0.5px));border:var(--tooltip-arrow-size) solid transparent;border-inline-start-color:var(--tooltip-bg)}.expressive-code .copy .feedback.show{opacity:1;transform:translate3d(0, 0, 0)}@media (hover: hover){.expressive-code{}.expressive-code .copy button{opacity:0;width:2rem;height:2rem}.expressive-code .frame:hover .copy button:not(:hover),.expressive-code .frame:focus-within :focus-visible ~ .copy button:not(:hover),.expressive-code .frame .copy .feedback.show ~ button:not(:hover){opacity:0.75}}.expressive-code :nth-child(1 of .ec-line) .code{padding-inline-end:calc(2rem + var(--ec-codePadInl))}.expressive-code .ec-section{position:relative}.expressive-code .ec-section summary{position:relative;font-family:var(--ec-cs-closedFontFml);font-size:var(--ec-cs-closedFontSize);line-height:var(--ec-cs-closedLineHt);user-select:none;-webkit-user-select:none;cursor:pointer;color:var(--ec-cs-closedTextCol);background-color:var(--ec-cs-closedBgCol);--border-color:var(--ec-cs-closedBrdCol);--border-width:var(--ec-cs-closedBrdWd);box-shadow:inset 0 calc(-1 * var(--border-width)) var(--border-color), inset 0 var(--border-width) var(--border-color);margin:var(--ec-cs-closedMarg);padding:0}.expressive-code .ec-section summary::marker{display:inline-block;content:"";width:16px;height:16px}.expressive-code .ec-section summary::-webkit-details-marker{display:none}.expressive-code .ec-section summary :is(.expand, .collapse){position:relative;display:inline-block;width:16px;height:16px;vertical-align:text-bottom;opacity:0.75}.expressive-code .ec-section summary :is(.expand, .collapse)::after{content:'';position:absolute;pointer-events:none;inset:0;background-color:var(--ec-cs-closedTextCol);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;line-height:0}.expressive-code .ec-section summary .expand::after{-webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='m8.177.677 2.896 2.896a.25.25 0 0 1-.177.427H8.75v1.25a.75.75 0 0 1-1.5 0V4H5.104a.25.25 0 0 1-.177-.427L7.823.677a.25.25 0 0 1 .354 0ZM7.25 10.75a.75.75 0 0 1 1.5 0V12h2.146a.25.25 0 0 1 .177.427l-2.896 2.896a.25.25 0 0 1-.354 0l-2.896-2.896A.25.25 0 0 1 5.104 12H7.25v-1.25Zm-5-2a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 6 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 12 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='m8.177.677 2.896 2.896a.25.25 0 0 1-.177.427H8.75v1.25a.75.75 0 0 1-1.5 0V4H5.104a.25.25 0 0 1-.177-.427L7.823.677a.25.25 0 0 1 .354 0ZM7.25 10.75a.75.75 0 0 1 1.5 0V12h2.146a.25.25 0 0 1 .177.427l-2.896 2.896a.25.25 0 0 1-.354 0l-2.896-2.896A.25.25 0 0 1 5.104 12H7.25v-1.25Zm-5-2a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 6 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 12 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z'/%3E%3C/svg%3E");-webkit-print-color-adjust:exact;print-color-adjust:exact}.expressive-code .ec-section summary .collapse{display:none}.expressive-code .ec-section summary .collapse::after{-webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='M10.896 2H8.75V.75a.75.75 0 0 0-1.5 0V2H5.104a.25.25 0 0 0-.177.427l2.896 2.896a.25.25 0 0 0 .354 0l2.896-2.896A.25.25 0 0 0 10.896 2ZM8.75 15.25a.75.75 0 0 1-1.5 0V14H5.104a.25.25 0 0 1-.177-.427l2.896-2.896a.25.25 0 0 1 .354 0l2.896 2.896a.25.25 0 0 1-.177.427H8.75v1.25Zm-6.5-6.5a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 6 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 12 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='M10.896 2H8.75V.75a.75.75 0 0 0-1.5 0V2H5.104a.25.25 0 0 0-.177.427l2.896 2.896a.25.25 0 0 0 .354 0l2.896-2.896A.25.25 0 0 0 10.896 2ZM8.75 15.25a.75.75 0 0 1-1.5 0V14H5.104a.25.25 0 0 1-.177-.427l2.896-2.896a.25.25 0 0 1 .354 0l2.896 2.896a.25.25 0 0 1-.177.427H8.75v1.25Zm-6.5-6.5a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 6 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 12 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z'/%3E%3C/svg%3E")}.expressive-code .ec-section summary .text{margin-left:1em}.expressive-code .ec-section summary .ec-line .code{padding-block:var(--ec-cs-closedPadBlk);text-indent:0}.expressive-code .ec-section[open],.expressive-code .ec-section details[open] + .content-lines{--border-color:var(--ec-cs-openBrdCol);--border-width:var(--ec-cs-openBrdWd);box-shadow:inset 0 calc(-1 * var(--border-width)) var(--border-color), inset 0 var(--border-width) var(--border-color);padding-inline:var(--ec-cs-openPad);margin-inline:var(--ec-cs-openMarg)}.expressive-code .ec-section.github[open] summary{display:none}.expressive-code .ec-section.github[open]{background-color:var(--ec-cs-openBgCol)}.expressive-code .ec-section:is(.collapsible-start, .collapsible-end){display:flex;flex-direction:column}.expressive-code .ec-section:is(.collapsible-start, .collapsible-end) .content-lines{display:none}.expressive-code .ec-section:is(.collapsible-start, .collapsible-end) details[open] .collapse{display:inline-block}.expressive-code .ec-section:is(.collapsible-start, .collapsible-end) details[open] :is(.expand, .text){display:none}.expressive-code .ec-section:is(.collapsible-start, .collapsible-end) details[open] + .content-lines{display:block;background-color:var(--ec-cs-openBgColCollapsible)}@media print{.expressive-code .ec-section:is(.collapsible-start, .collapsible-end) details[open]{display:none}}.expressive-code .ec-section.collapsible-end{flex-direction:column-reverse}.expressive-code .gutter .ln{display:inline-flex;justify-content:flex-end;align-items:flex-start;box-sizing:content-box;min-width:var(--lnWidth, 2ch);padding-inline:2ch;color:var(--ec-lineNumbers-fg)}.highlight .expressive-code .gutter .ln{color:var(--ec-lineNumbers-hlFg)}:root,:root:not([data-theme='one-light']) .expressive-code[data-theme='one-light']{--ec-brdRad:0.3rem;--ec-brdWd:1.5px;--ec-brdCol:#d4d4d4;--ec-codeFontFml:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono','Courier New',monospace;--ec-codeFontSize:0.85rem;--ec-codeFontWg:400;--ec-codeLineHt:1.65;--ec-codePadBlk:1rem;--ec-codePadInl:1.35rem;--ec-codeBg:#fafafa;--ec-codeFg:#383a42;--ec-codeSelBg:#e5e5e6;--ec-gtrFg:#8a8a8c;--ec-gtrBrdCol:#8a8a8c33;--ec-gtrBrdWd:1.5px;--ec-gtrHlFg:#383a42bc;--ec-uiFontFml:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';--ec-uiFontSize:0.9rem;--ec-uiFontWg:400;--ec-uiLineHt:1.65;--ec-uiPadBlk:0.25rem;--ec-uiPadInl:1rem;--ec-uiSelBg:#dbdbdc;--ec-uiSelFg:#232324;--ec-focusBrd:#526fff;--ec-sbThumbCol:#4e56666e;--ec-sbThumbHoverCol:#5a637597;--ec-tm-lineMarkerAccentMarg:0rem;--ec-tm-lineMarkerAccentWd:0.15rem;--ec-tm-lineMarkerLabelPadInl:0.2rem;--ec-tm-lineMarkerLabelCol:white;--ec-tm-lineDiffIndMargLeft:0.3rem;--ec-tm-inlMarkerBrdWd:1.5px;--ec-tm-inlMarkerBrdRad:0.2rem;--ec-tm-inlMarkerPad:0.15rem;--ec-tm-insDiffIndContent:'+';--ec-tm-delDiffIndContent:'-';--ec-tm-markBg:#9fb6ff80;--ec-tm-markBrdCol:#5570b3d0;--ec-tm-insBg:#94c68480;--ec-tm-insBrdCol:#4e7e41d0;--ec-tm-insDiffIndCol:#3a692fd0;--ec-tm-delBg:#fea09280;--ec-tm-delBrdCol:#ae594fd0;--ec-tm-delDiffIndCol:#97453dd0;--ec-frm-shdCol:#00000028;--ec-frm-frameBoxShdCssVal:0.1rem 0.1rem 0.2rem #00000028;--ec-frm-edActTabBg:#fafafa;--ec-frm-edActTabFg:#121417;--ec-frm-edActTabBrdCol:transparent;--ec-frm-edActTabIndHt:1.5px;--ec-frm-edActTabIndTopCol:null;--ec-frm-edActTabIndBtmCol:null;--ec-frm-edTabsMargInlStart:0;--ec-frm-edTabsMargBlkStart:0;--ec-frm-edTabBrdRad:0.3rem;--ec-frm-edTabBarBg:#eaeaeb;--ec-frm-edTabBarBrdCol:#d4d4d4;--ec-frm-edTabBarBrdBtmCol:transparent;--ec-frm-edBg:#fafafa;--ec-frm-trmTtbFg:#424243;--ec-frm-trmTtbDotsFg:#424243;--ec-frm-trmTtbDotsOpa:0.15;--ec-frm-trmTtbBg:#eaeaeb;--ec-frm-trmTtbBrdBtmCol:#d4d4d4;--ec-frm-trmBg:#fafafa;--ec-frm-inlBtnFg:#383a42;--ec-frm-inlBtnBg:#383a42;--ec-frm-inlBtnBgIdleOpa:0;--ec-frm-inlBtnBgHoverOrFocusOpa:0.2;--ec-frm-inlBtnBgActOpa:0.3;--ec-frm-inlBtnBrd:#383a42;--ec-frm-inlBtnBrdOpa:0.4;--ec-frm-tooltipSuccessBg:#008900;--ec-frm-tooltipSuccessFg:white;--ec-cs-closedBrdWd:0;--ec-cs-closedPadBlk:4px;--ec-cs-closedMarg:0;--ec-cs-closedFontFml:inherit;--ec-cs-closedFontSize:inherit;--ec-cs-closedLineHt:inherit;--ec-cs-closedTextCol:#383a42;--ec-cs-closedBgCol:rgb(84 174 255 / 20%);--ec-cs-closedBrdCol:rgb(84 174 255 / 50%);--ec-cs-openBrdWd:1px;--ec-cs-openPad:0;--ec-cs-openMarg:0;--ec-cs-openBgCol:transparent;--ec-cs-openBgColCollapsible:rgb(84 174 255 / 10%);--ec-cs-openBrdCol:transparent;--ec-lineNumbers-fg:inherit;--ec-lineNumbers-hlFg:inherit}.expressive-code .ec-line :where(span[style^='--']:not([class])),:root:not([data-theme='one-light']) .expressive-code[data-theme='one-light'] .ec-line :where(span[style^='--']:not([class])){color:var(--0, inherit);font-style:var(--0fs, inherit);font-weight:var(--0fw, inherit);text-decoration:var(--0td, inherit)}</style><script type="module">try{(()=>{function a(e){if(!e)return;let t=e.getAttribute("tabindex")!==null,n=e.scrollWidth>e.clientWidth;n&&!t?e.setAttribute("tabindex","0"):!n&&t&&e.removeAttribute("tabindex")}var u=window.requestIdleCallback||(e=>setTimeout(e,1)),i=window.cancelIdleCallback||clearTimeout;function l(e){let t=new Set,n,r;return new ResizeObserver(c=>{c.forEach(o=>t.add(o.target)),n&&clearTimeout(n),r&&i(r),n=setTimeout(()=>{r&&i(r),r=u(()=>{t.forEach(o=>e(o)),t.clear()})},250)})}function d(e,t){e.querySelectorAll?.(".expressive-code pre > code").forEach(n=>{let r=n.parentElement;r&&t.observe(r)})}var s=l(a);d(document,s);var b=new MutationObserver(e=>e.forEach(t=>t.addedNodes.forEach(n=>{d(n,s)})));b.observe(document.body,{childList:!0,subtree:!0});document.addEventListener("astro:page-load",()=>{d(document,s)});})();}catch(e){console.error("[EC] tabindex-js-module failed:",e)}</script><script type="module">try{(()=>{function i(o){let e=document.createElement("pre");Object.assign(e.style,{opacity:"0",pointerEvents:"none",position:"absolute",overflow:"hidden",left:"0",top:"0",width:"20px",height:"20px",webkitUserSelect:"auto",userSelect:"all"}),e.ariaHidden="true",e.textContent=o,document.body.appendChild(e);let a=document.createRange();a.selectNode(e);let n=getSelection();if(!n)return!1;n.removeAllRanges(),n.addRange(a);let r=!1;try{r=document.execCommand("copy")}finally{n.removeAllRanges(),document.body.removeChild(e)}return r}async function l(o){let e=o.currentTarget,a=e.dataset,n=!1,r=a.code.replace(/\u007f/g,`
`);try{await navigator.clipboard.writeText(r),n=!0}catch{n=i(r)}if(!n||e.parentNode?.querySelector(".feedback"))return;let t=document.createElement("div");t.classList.add("feedback"),t.append(a.copied),e.before(t),t.offsetWidth,requestAnimationFrame(()=>t?.classList.add("show"));let c=()=>!t||t.classList.remove("show"),d=()=>{!t||parseFloat(getComputedStyle(t).opacity)>0||(t.remove(),t=void 0)};setTimeout(c,1500),setTimeout(d,2500),e.addEventListener("blur",c),t.addEventListener("transitioncancel",d),t.addEventListener("transitionend",d)}function s(o){o.querySelectorAll?.(".expressive-code .copy button").forEach(e=>e.addEventListener("click",l))}s(document);var u=new MutationObserver(o=>o.forEach(e=>e.addedNodes.forEach(a=>{s(a)})));u.observe(document.body,{childList:!0,subtree:!0});document.addEventListener("astro:page-load",()=>{s(document)});})();}catch(e){console.error("[EC] copy-js-module failed:",e)}</script><figure class="post-detail-module_figure__iLVbY frame"><figcaption class="post-detail-module_caption__mebOm header"></figcaption><pre data-language="plaintext"><code><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">1</div></div><div class="kh48qt0 code"><span style="--0:#383a42">aws configure --profile IAM 사용자 이름</span></div></div></code></pre><div class="kh48qt0 copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="aws configure --profile IAM 사용자 이름"><div class="kh48qt0"></div></button></div></figure></div>
<p class="post-detail-module_p__Aa2B9">설치가 완료 되면 해당 명령어를 터미널에 입력하여 CLI를 통하여 IAM 사용자를 추가 해준다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="AWS CLI 설정" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-7.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-7.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">AWS CLI 설정</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">AWS Access Key ID와 AWS Secret Access Key는 IAM 사용자 생성 후 얻은 액세스 키 ID와 비밀 액세스 키를 입력하면 된다.</p>
<p class="post-detail-module_p__Aa2B9">Default region name에는 원하는 리전을 적어주면 된다. AP-NORTHEAST-2는 아시아-태평양 서울 리전이다.</p>
<p class="post-detail-module_p__Aa2B9">여기 까지 하면 IAM 권한 설정까지 완료 되었다.</p>
<h3 class="post-detail-module_h3__LqBWz">AWS S3 버킷 생성</h3>
<p class="post-detail-module_p__Aa2B9">이제 웹 호스팅용 S3 버킷을 생성해야 한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="AWS 서비스 메뉴" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-8.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-8.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">AWS 서비스 메뉴</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">AWS 서비스 메뉴에서 S3를 검색하여 S3 메뉴로 이동한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="S3 버킷 만들기" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-9.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-9.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">S3 버킷 만들기</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">버킷 만들기 버튼을 클릭한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="버킷 이름 및 지역 설정" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-10.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-10.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">버킷 이름 및 지역 설정</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">버킷 이름을 선택해준다. 리전은 기본으로 아시아 태평양(서울)로 되어있는데 원하면 바꿔도 된다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="버킷 옵션 구성" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-11.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-11.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">버킷 옵션 구성</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">기본 설정으로 정적 웹 호스팅 환경을 구성할 수 있기 때문에 아무것도 건들지 않고 다음으로 넘어간다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="버킷 권한 설정" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-12.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-12.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">버킷 권한 설정</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">기본적으로 Amazon S3은 계정 및 버킷에 대한 퍼블릭 액세스를 차단한다. 하지만 정적 웹 호스팅 환경을 구성하기 위해서는 요 퍼블릭 차단 설정을 해제 해주어야 한다. 모든 퍼블릭 액세스 차단 체크박스를 해제 하고 다음을 눌러준다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="버킷 만들기 검토" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-13.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-13.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">버킷 만들기 검토</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">마지막으로 실수한 부분이 있는지 검토를 마친 후 버킷 만들기 버튼을 클릭하면 버킷 생성이 완료 된다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="S3 버킷 목록" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-14.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-14.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">S3 버킷 목록</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">S3 버킷 목록으로 돌아오면 방금 생성한 버킷이 보인다. 이 버킷 항목을 눌러 버킷 설정 화면으로 이동한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="버킷 권한 - 정책 설정 화면" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-15.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-15.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">버킷 권한 - 정책 설정 화면</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">권한 탭을 클릭한 후 버킷 정책 항목을 클릭한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="버킷 정책 편집" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-16.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-16.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">버킷 정책 편집</figcaption></figure>
<div class="kh48qt0 expressive-code"><figure class="post-detail-module_figure__iLVbY frame"><figcaption class="post-detail-module_caption__mebOm header"></figcaption><pre data-language="plaintext"><code><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">1</div></div><div class="kh48qt0 code"><span style="--0:#383a42">{</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">2</div></div><div class="kh48qt0 code"><span class="indent"><span style="--0:#383a42">  </span></span><span style="--0:#383a42">&quot;Version&quot;:&quot;2012-10-17&quot;,</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">3</div></div><div class="kh48qt0 code"><span class="indent"><span style="--0:#383a42">  </span></span><span style="--0:#383a42">&quot;Statement&quot;:[</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">4</div></div><div class="kh48qt0 code"><span class="indent"><span style="--0:#383a42">    </span></span><span style="--0:#383a42">{</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">5</div></div><div class="kh48qt0 code"><span class="indent"><span style="--0:#383a42">      </span></span><span style="--0:#383a42">&quot;Sid&quot;:&quot;PublicReadGetObject&quot;,</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">6</div></div><div class="kh48qt0 code"><span class="indent"><span style="--0:#383a42">      </span></span><span style="--0:#383a42">&quot;Effect&quot;:&quot;Allow&quot;,</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">7</div></div><div class="kh48qt0 code"><span class="indent"><span style="--0:#383a42">      </span></span><span style="--0:#383a42">&quot;Principal&quot;: &quot;*&quot;,</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">8</div></div><div class="kh48qt0 code"><span class="indent"><span style="--0:#383a42">      </span></span><span style="--0:#383a42">&quot;Action&quot;:[&quot;s3:GetObject&quot;],</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">9</div></div><div class="kh48qt0 code"><span class="indent"><span style="--0:#383a42">      </span></span><span style="--0:#383a42">&quot;Resource&quot;:[&quot;arn:aws:s3:::버킷 이름/*&quot;]</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">10</div></div><div class="kh48qt0 code"><span class="indent"><span style="--0:#383a42">    </span></span><span style="--0:#383a42">}</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">11</div></div><div class="kh48qt0 code"><span class="indent"><span style="--0:#383a42">  </span></span><span style="--0:#383a42">]</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">12</div></div><div class="kh48qt0 code"><span style="--0:#383a42">}</span></div></div></code></pre><div class="kh48qt0 copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &quot;Version&quot;:&quot;2012-10-17&quot;,  &quot;Statement&quot;:[    {      &quot;Sid&quot;:&quot;PublicReadGetObject&quot;,      &quot;Effect&quot;:&quot;Allow&quot;,      &quot;Principal&quot;: &quot;*&quot;,      &quot;Action&quot;:[&quot;s3:GetObject&quot;],      &quot;Resource&quot;:[&quot;arn:aws:s3:::버킷 이름/*&quot;]    }  ]}"><div class="kh48qt0"></div></button></div></figure></div>
<p class="post-detail-module_p__Aa2B9">웹 사이트에 대한 퍼블릭 읽기 액세스 권한을 부여하기 위해 위의 버킷 정책을 복사한 후 버킷 정책 편집기에 붙여 넣은 후 저장을 눌러준다. Resource에는 버킷 이름을 입력해야 한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="버킷 속성 화면" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-17.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-17.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">버킷 속성 화면</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">속성 탭을 선택한 후 정적 웹사이트 호스팅 항목을 클릭한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="인덱스 문서 구성" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-18.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-18.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">인덱스 문서 구성</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">S3에 업로드 하려는 웹 콘텐츠 파일들이 React로 작업한 SPA 구조를 가지고 있기 때문에 인덱스 문서와 오류 문서에 index.html을 입력해준다.</p>
<p class="post-detail-module_p__Aa2B9">SPA는 최초 요청에서 index.html을 받은 후 js, css 등 필요한 파일들을 로드하여 앱을 초기화 한다. 때문에 인덱스 주소(/)로 접속한 후 다른 페이지로 이동하면 문제가 없으나 하위 url을 복사해서 접속하거나 인덱스 페이지에서 다른 페이지로 이동 후 새로고침을 하면 해당 url에 맞는 html파일을 찾을 수 없기 때문에 404 페이지가 나오게 된다. 이 문제를 해결하려면 하위 url로 접근해도 index.html을 반환하도록 하게 하면 된다. 그래서 오류 문서에도 index.html을 입력하는 것이다.</p>
<h3 class="post-detail-module_h3__LqBWz">배포</h3>
<p class="post-detail-module_p__Aa2B9">AWS CLI 설정과 S3 설정이 완료 되었으므로 이제 배포를 하면 된다.</p>
<div class="kh48qt0 expressive-code"><figure class="post-detail-module_figure__iLVbY frame"><figcaption class="post-detail-module_caption__mebOm header"></figcaption><pre data-language="json"><code><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">1</div></div><div class="kh48qt0 code"><span class="indent">  </span><span style="--0:#387138">&quot;scripts&quot;</span><span style="--0:#383A42">: {</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">2</div></div><div class="kh48qt0 code"><span class="indent">    </span><span style="--0:#AF4238">&quot;start&quot;</span><span style="--0:#383A42">: </span><span style="--0:#387138">&quot;node scripts/start.js&quot;</span><span style="--0:#383A42">,</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">3</div></div><div class="kh48qt0 code"><span class="indent">    </span><span style="--0:#AF4238">&quot;build&quot;</span><span style="--0:#383A42">: </span><span style="--0:#387138">&quot;node scripts/build.js&quot;</span><span style="--0:#383A42">,</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">4</div></div><div class="kh48qt0 code"><span class="indent">    </span><span style="--0:#AF4238">&quot;test&quot;</span><span style="--0:#383A42">: </span><span style="--0:#387138">&quot;node scripts/test.js&quot;</span><span style="--0:#383A42">,</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">5</div></div><div class="kh48qt0 code"><span class="indent">    </span><span style="--0:#AF4238">&quot;deploy&quot;</span><span style="--0:#383A42">: </span><span style="--0:#387138">&quot;aws s3 sync ./build s3://버킷 이름 --profile=IAM 이름&quot;</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">6</div></div><div class="kh48qt0 code"><span class="indent"><span style="--0:#383A42">  </span></span><span style="--0:#383A42">},</span></div></div></code></pre><div class="kh48qt0 copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="  &quot;scripts&quot;: {    &quot;start&quot;: &quot;node scripts/start.js&quot;,    &quot;build&quot;: &quot;node scripts/build.js&quot;,    &quot;test&quot;: &quot;node scripts/test.js&quot;,    &quot;deploy&quot;: &quot;aws s3 sync ./build s3://버킷 이름 --profile=IAM 이름&quot;  },"><div class="kh48qt0"></div></button></div></figure></div>
<p class="post-detail-module_p__Aa2B9">좀 더 편한 배포를 위해 package.json 파일의 scripts 부분에 deploy 명령어를 추가한다.</p>
<div class="kh48qt0 expressive-code"><figure class="post-detail-module_figure__iLVbY frame"><figcaption class="post-detail-module_caption__mebOm header"></figcaption><pre data-language="plaintext"><code><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">1</div></div><div class="kh48qt0 code"><span style="--0:#383a42">yarn build &amp;&amp; yarn deploy</span></div></div></code></pre><div class="kh48qt0 copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="yarn build &amp;&amp; yarn deploy"><div class="kh48qt0"></div></button></div></figure></div>
<p class="post-detail-module_p__Aa2B9">이제 프로젝트 빌드 후 deploy 명령어로 배포까지 한 후 엔드포인트로 접속해보면 정상적으로 페이지가 뜨는 것을 확인할 수 있다.</p>
<h3 class="post-detail-module_h3__LqBWz">CloudFront 설정하기</h3>
<p class="post-detail-module_p__Aa2B9">AWS CloudFront란 .html, .css, .js 및 이미지 파일과 같은 정적 및 동적 웹 콘텐츠를 사용자에게 더 빨리 배포하도록 지원하는 CDN 서비스이다.</p>
<p class="post-detail-module_p__Aa2B9">S3로 구축한 정적 웹 사이트에 HTTPS를 사용하려면 CloudFront를 사용해야 한다. HTTPS 지원 뿐만 아니라 CloudFront를 사용하면 커스텀 도메인 사용도 가능하며 S3에 직접 액세스 하는 것 보다 요금도 저렴하다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="AWS 서비스 메뉴" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-19.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-19.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">AWS 서비스 메뉴</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">AWS 서비스 메뉴에서 CloudFront를 검색하여 CloudFront 메뉴로 이동한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="CloudFront Distribution 목록" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-20.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-20.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">CloudFront Distribution 목록</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">Create Distribution 버튼을 클릭한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="Create Distribution - step 1" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-21.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-21.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">Create Distribution - step 1</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">Web 부분에 있는 Get Started 버튼을 클릭한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="Create Distribution - step 2" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-22.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-22.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">Create Distribution - step 2</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">Origion Domain Name 항목의 input 박스를 클릭하면 방금 만든 S3 버킷이 나타난다. 해당 S3 항목을 선택한다.</p>
<p class="post-detail-module_p__Aa2B9">Viewer Protocol Policy 항목에서는 Redirect Http to Https 를 선택하고 화면을 쭉 내려서 Create Distribution을 클릭한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="CloudFront Distribution 목록" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-23.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-23.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">CloudFront Distribution 목록</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">완료 후 다시 CloudFront Distribition 목록으로 돌아오면 방금 생성한 CloudFront가 보인다. 항목에 있는 Domain Name 값으로 S3에 배포한 React 앱에 접속할 수 있다. Custom Domain도 설정할 수 있으나 적용할 도메인이 없어서 일단 이 과정은 패스 하겠다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="403 Error" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-24.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-24.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">403 Error</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">하지만 CloudFront에서 제공한 url로 접속시 403 에러가 뜬다. 하위 url이 아니라 root url로 접속해도 403 error가 뜨는데 왜 그런지는 잘 모르겠다 ㅠ.. 그래도 다행히 해결법은 있다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="CloudFront Error Page 추가" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-25.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-25.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">CloudFront Error Page 추가</figcaption></figure>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="CloudFront Error" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-26.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-26.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">CloudFront Error</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">HTTP Error Code에서 403을 선택한다. Error Caching Minimum TTL 항목은 CloudFront에서 오리진 서버로부터 오류 응답을 캐싱하려는 최소 시간을 설정하는 항목인데 얼마를 입력해야 좋을지 몰라서 일단 0을 입력했다. Response Page Path는 /index.html, Response Code는 200으로 설정한다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="CloudFront Distribution 목록" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-27.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-27.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">CloudFront Distribution 목록</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">403 에러 뿐만 아니라 404 에러도 같은 방법으로 만들어 주었다.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="CloudFront Distribution 목록" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-28.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-28.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">CloudFront Distribution 목록</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">약 1분이 지난 후 새로고침을 해보면 접속이 잘 되는 것을 확인할 수 있다.</p>
<h4 class="post-detail-module_h4__8tOkT">CloudFront 캐시 무효화</h4>
<p class="post-detail-module_p__Aa2B9">CloudFront로 파일을 배포하면 S3에서 파일을 업데이트 해도 캐시가 남아있기 떄문에 업데이트 이전의 파일을 보여준다. 캐시 유지 시간이 24시이기 때문에 파일을 업데이트 한후 24시간 이후에 업데이트 한 파일이 적용된다.
캐시 시간에 상관없이 강제로 파일을 업데이트 하고 싶으면 Invaldiation 작업이 필요하다. 배포할 때 파일도 강제로 업데이트 할 수 있도록 작업을 해보자.</p>
<figure class="post-detail-module_figure__iLVbY rehype-figure"><img alt="CloudFront Distribution 목록" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="post-detail-module_img__m5wuU" style="color:transparent" srcSet="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-29.png&amp;w=16&amp;q=75 1x" src="/_next/image?url=https%3A%2F%2Fpartykyoung.github.io%2Fimages%2Fposts%2Faws-s3-hosting-29.png&amp;w=16&amp;q=75"/><figcaption class="post-detail-module_caption__mebOm">CloudFront Distribution 목록</figcaption></figure>
<p class="post-detail-module_p__Aa2B9">IAM 항목으로 가서 첫번쨰 단계에 만들었던 IAM 사용자에 CloudFrontFullAccess 권한을 추가해야한다.</p>
<div class="kh48qt0 expressive-code"><figure class="post-detail-module_figure__iLVbY frame"><figcaption class="post-detail-module_caption__mebOm header"></figcaption><pre data-language="json"><code><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">1</div></div><div class="kh48qt0 code"><span class="indent">  </span><span style="--0:#387138">&quot;scripts&quot;</span><span style="--0:#383A42">: {</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">2</div></div><div class="kh48qt0 code"><span class="indent">    </span><span style="--0:#AF4238">&quot;start&quot;</span><span style="--0:#383A42">: </span><span style="--0:#387138">&quot;node scripts/start.js&quot;</span><span style="--0:#383A42">,</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">3</div></div><div class="kh48qt0 code"><span class="indent">    </span><span style="--0:#AF4238">&quot;build&quot;</span><span style="--0:#383A42">: </span><span style="--0:#387138">&quot;node scripts/build.js&quot;</span><span style="--0:#383A42">,</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">4</div></div><div class="kh48qt0 code"><span class="indent">    </span><span style="--0:#AF4238">&quot;test&quot;</span><span style="--0:#383A42">: </span><span style="--0:#387138">&quot;node scripts/test.js&quot;</span><span style="--0:#383A42">,</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">5</div></div><div class="kh48qt0 code"><span class="indent">    </span><span style="--0:#AF4238">&quot;deploy&quot;</span><span style="--0:#383A42">: </span><span style="--0:#387138">&quot;aws s3 sync ./build s3://버킷 이름 --profile=IAM 이름&quot;</span><span style="--0:#383A42">,</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">6</div></div><div class="kh48qt0 code"><span class="indent">    </span><span style="--0:#AF4238">&quot;invalidate&quot;</span><span style="--0:#383A42">: </span><span style="--0:#387138">&quot;aws cloudfront create-invalidation --profile=위에서 생성한 iam 사용자 이름--distribution-id 위에서 생성한 ColudFront distribution Id --paths / /index.html /error.html /service-worker.js /manifest.json /favicon.ico&quot;</span></div></div><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">7</div></div><div class="kh48qt0 code"><span class="indent"><span style="--0:#383A42">  </span></span><span style="--0:#383A42">},</span></div></div></code></pre><div class="kh48qt0 copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="  &quot;scripts&quot;: {    &quot;start&quot;: &quot;node scripts/start.js&quot;,    &quot;build&quot;: &quot;node scripts/build.js&quot;,    &quot;test&quot;: &quot;node scripts/test.js&quot;,    &quot;deploy&quot;: &quot;aws s3 sync ./build s3://버킷 이름 --profile=IAM 이름&quot;,    &quot;invalidate&quot;: &quot;aws cloudfront create-invalidation --profile=위에서 생성한 iam 사용자 이름--distribution-id 위에서 생성한 ColudFront distribution Id --paths / /index.html /error.html /service-worker.js /manifest.json /favicon.ico&quot;  },"><div class="kh48qt0"></div></button></div></figure></div>
<p class="post-detail-module_p__Aa2B9">s3에 배포한 React 프로젝트의 package.json 파일의 scripts 항목에 invalidate 명령어를 추가 해준다.</p>
<div class="kh48qt0 expressive-code"><figure class="post-detail-module_figure__iLVbY frame"><figcaption class="post-detail-module_caption__mebOm header"></figcaption><pre data-language="plaintext"><code><div class="kh48qt0 ec-line"><div class="kh48qt0 gutter"><div class="kh48qt0 ln" aria-hidden="true">1</div></div><div class="kh48qt0 code"><span style="--0:#383a42">yarn build &amp;&amp; yarn deploy &amp;&amp; yarn invalidate</span></div></div></code></pre><div class="kh48qt0 copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="yarn build &amp;&amp; yarn deploy &amp;&amp; yarn invalidate"><div class="kh48qt0"></div></button></div></figure></div>
<p class="post-detail-module_p__Aa2B9">이재 배포할 때 invalidate 명령어를 같이 사용하주면 캐시가 무효화 되면서 새로운 배포 파일이 적용 된다.</p>
<h2 class="post-detail-module_h2__EwHhX">마무리</h2>
<p class="post-detail-module_p__Aa2B9">S3에 React 프로젝트를 업로드 하여 정적 웹 호스팅을 하고 CloudFront 까지 적용해봤다. 나중에 젠킨스를 사용하여 자동 배포까지 적용해 보고 싶다. 부지런히 공부하고 실습해야겠다.</p>
<h2 class="post-detail-module_h2__EwHhX">Reference</h2>
<blockquote>
<ul class="post-detail-module_ul__MqZiO">
<li class="post-detail-module_li__Xzqkr"><a class="post-detail-module_link__GIS41" href="https://aws.amazon.com/ko/s3/">Amazon S3</a></li>
<li class="post-detail-module_li__Xzqkr"><a class="post-detail-module_link__GIS41" href="https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/dev/Welcome.html">Amazon S3이란 무엇입니까?</a></li>
<li class="post-detail-module_li__Xzqkr"><a class="post-detail-module_link__GIS41" href="https://www.44bits.io/ko/keyword/amazon-web-service#%EC%95%84%EB%A7%88%EC%A1%B4-s3s3-amazon-simple-storage-service">아마존 S3(S3, Amazon Simple Storage Service)</a></li>
<li class="post-detail-module_li__Xzqkr"><a class="post-detail-module_link__GIS41" href="https://opentutorials.org/course/608/3006">Simple Storage Service(S3)</a></li>
<li class="post-detail-module_li__Xzqkr"><a class="post-detail-module_link__GIS41" href="https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/dev/WebsiteHosting.html">Amazon S3 정적 웹 사이트 호스팅</a></li>
<li class="post-detail-module_li__Xzqkr"><a class="post-detail-module_link__GIS41" href="https://react-etc.vlpt.us/08.deploy-s3.html">리액트 앱 AWS S3, CloudFront 에 배포하기</a></li>
<li class="post-detail-module_li__Xzqkr"><a class="post-detail-module_link__GIS41" href="https://blog.outsider.ne.kr/1394">pushState를 사용하는 SPA를 S3와 CloudFront로 서비스하기</a></li>
<li class="post-detail-module_li__Xzqkr"><a class="post-detail-module_link__GIS41" href="https://jaroinside.tistory.com/46">SPA를 AWS S3 정적 웹 호스팅시 문제 해결</a></li>
<li class="post-detail-module_li__Xzqkr"><a class="post-detail-module_link__GIS41" href="https://musma.github.io/2019/06/29/publish-static-assets-over-https-using-cloudfront.html">CloudFront를 이용해 HTTPS로 정적 리소스 배포하기</a></li>
<li class="post-detail-module_li__Xzqkr"><a class="post-detail-module_link__GIS41" href="https://velog.io/@_junukim/CloudFront%EB%A1%9C-React%EC%95%B1-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0-2">CloudFront로 React앱 배포하기 - 2</a></li>
</ul>
</blockquote></div><footer class="_11cv1u40"><span>Powered by Next.js, Hosted by GitHub Pages.</span><span>©<a href="https://github.com/partykyoung" rel="noreferrer" target="_blank" class="_11cv1u41">KyoungAh</a>, All rights reserved.</span></footer><script src="/_next/static/chunks/webpack-916d3cf9079c5391.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[9328,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"71\",\"static/chunks/71-79248221d46a3079.js\",\"177\",\"static/chunks/app/layout-f7cbf492592b1d12.js\"],\"QueryClientProvider\"]\n3:I[4765,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"71\",\"static/chunks/71-79248221d46a3079.js\",\"177\",\"static/chunks/app/layout-f7cbf492592b1d12.js\"],\"Header\"]\n4:I[4459,[],\"\"]\n5:I[4791,[],\"\"]\n7:I[8336,[],\"OutletBoundary\"]\na:I[8336,[],\"ViewportBoundary\"]\nc:I[8336,[],\"MetadataBoundary\"]\ne:I[8798,[],\"\"]\n:HL[\"/_next/static/media/45cca0c1391027f2-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/47cbc4e2adbc5db9-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/c97d4358b5ad6f1f-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/b432f2368e6fb937.css\",\"style\"]\n:HL[\"/_next/static/css/1b0517c55006ee9e.css\",\"style\"]\n:HL[\"/_next/static/css/ca8a8c70aedbb578.css\",\"style\"]\n:HL[\"/_next/static/css/d3c42565bf5a0151.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"1HygWC51CdQSdSLpu2wxM\",\"p\":\"\",\"c\":[\"\",\"2020-07-26-etc-aws-s3-hosting\"],\"i\":false,\"f\":[[[\"\",{\"children\":[[\"slug\",\"2020-07-26-etc-aws-s3-hosting\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b432f2368e6fb937.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/1b0517c55006ee9e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/ca8a8c70aedbb578.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"ko\",\"className\":\"__variable_66f45d __variable_9320b3 __variable_c331f0\",\"children\":[\"$\",\"body\",null,{\"children\":[\"$\",\"$L2\",null,{\"children\":[[\"$\",\"$L3\",null,{}],[\"$\",\"div\",null,{\"className\":\"container\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"$undefined\",[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"footer\",null,{\"className\":\"_11cv1u40\",\"children\":[[\"$\",\"span\",null,{\"children\":\"Powered by Next.js, Hosted by GitHub Pages.\"}],[\"$\",\"span\",null,{\"children\":[\"©\",[\"$\",\"a\",null,{\"href\":\"https://github.com/partykyoung\",\"rel\":\"noreferrer\",\"target\":\"_blank\",\"className\":\"_11cv1u41\",\"children\":\"KyoungAh\"}],\", All rights reserved.\"]}]]}]]}]}]}]]}],{\"children\":[[\"slug\",\"2020-07-26-etc-aws-s3-hosting\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",\"$undefined\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d3c42565bf5a0151.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L7\",null,{\"children\":[\"$L8\",\"$L9\",null]}]]}],{},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"zsKInMEcczPrNiB64CPSC\",{\"children\":[[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$e\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"9:null\nd:[[\"$\",\"link\",\"0\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]]\n"])</script><script>self.__next_f.push([1,"f:I[3794,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"182\",\"static/chunks/app/%5Bslug%5D/page-57dc53ae6d0ba992.js\"],\"MdxFrontMatter\"]\n10:I[8129,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"182\",\"static/chunks/app/%5Bslug%5D/page-57dc53ae6d0ba992.js\"],\"H2\"]\n11:I[8129,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"182\",\"static/chunks/app/%5Bslug%5D/page-57dc53ae6d0ba992.js\"],\"P\"]\n12:I[8129,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"182\",\"static/chunks/app/%5Bslug%5D/page-57dc53ae6d0ba992.js\"],\"Link\"]\n13:I[8129,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"182\",\"static/chunks/app/%5Bslug%5D/page-57dc53ae6d0ba992.js\"],\"H3\"]\n14:I[8129,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"182\",\"static/chunks/app/%5Bslug%5D/page-57dc53ae6d0ba992.js\"],\"Ul\"]\n15:I[8129,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"182\",\"static/chunks/app/%5Bslug%5D/page-57dc53ae6d0ba992.js\"],\"Li\"]\n16:I[8129,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"182\",\"static/chunks/app/%5Bslug%5D/page-57dc53ae6d0ba992.js\"],\"Figure\"]\n17:I[8129,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"182\",\"static/chunks/app/%5Bslug%5D/page-57dc53ae6d0ba992.js\"],\"Img\"]\n18:I[8129,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"182\",\"static/chunks/app/%5Bslug%5D/page-57dc53ae6d0ba992.js\"],\"FigureCaption\"]\n19:I[8129,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"182\",\"static/chunks/app/%5Bslug%5D/page-57dc53ae6d0ba992.js\"],\"Div\"]\n1c:I[8129,[\"378\",\"static/chunks/378-5bf6c9ea599618fb.js\",\"46\",\"static/chunks/46-5e590dde3c59d1a1.js\",\"182\",\"static/chunks/app/%5Bslug%5D/page-57dc53a"])</script><script>self.__next_f.push([1,"e6d0ba992.js\"],\"H4\"]\n1a:T576c,"])</script><script>self.__next_f.push([1,".expressive-code{font-family:var(--ec-uiFontFml);font-size:var(--ec-uiFontSize);font-weight:var(--ec-uiFontWg);line-height:var(--ec-uiLineHt);text-size-adjust:none;-webkit-text-size-adjust:none}.expressive-code *:not(:is(svg, svg *)){all:revert;box-sizing:border-box}.expressive-code pre{display:flex;margin:0;padding:0;border:var(--ec-brdWd) solid var(--ec-brdCol);border-radius:calc(var(--ec-brdRad) + var(--ec-brdWd));background:var(--ec-codeBg)}.expressive-code pre:focus-visible{outline:3px solid var(--ec-focusBrd);outline-offset:-3px}.expressive-code pre \u003e code{all:unset;display:block;flex:1 0 100%;padding:var(--ec-codePadBlk) 0;color:var(--ec-codeFg);font-family:var(--ec-codeFontFml);font-size:var(--ec-codeFontSize);font-weight:var(--ec-codeFontWg);line-height:var(--ec-codeLineHt)}.expressive-code pre{overflow-x:auto}.expressive-code pre.wrap .ec-line .code{white-space:pre-wrap;overflow-wrap:break-word;min-width:min(20ch, var(--ecMaxLine, 20ch))}.expressive-code pre.wrap .ec-line .code span.indent{white-space:pre}.expressive-code pre::-webkit-scrollbar,.expressive-code pre::-webkit-scrollbar-track{background-color:inherit;border-radius:calc(var(--ec-brdRad) + var(--ec-brdWd));border-top-left-radius:0;border-top-right-radius:0}.expressive-code pre::-webkit-scrollbar-thumb{background-color:var(--ec-sbThumbCol);border:4px solid transparent;background-clip:content-box;border-radius:10px}.expressive-code pre::-webkit-scrollbar-thumb:hover{background-color:var(--ec-sbThumbHoverCol)}.expressive-code .ec-line{direction:ltr;unicode-bidi:isolate;display:grid;grid-template-areas:'gutter code';grid-template-columns:auto 1fr;position:relative}.expressive-code .ec-line .gutter{grid-area:gutter;color:var(--ec-gtrFg)}.expressive-code .ec-line .gutter \u003e *{pointer-events:none;user-select:none;-webkit-user-select:none}.expressive-code .ec-line .gutter ~ .code{--ecLineBrdCol:var(--ec-gtrBrdCol)}.expressive-code .ec-line.highlight .gutter{color:var(--ec-gtrHlFg)}.expressive-code .ec-line .code{grid-area:code;position:relative;box-sizing:content-box;padding-inline-start:calc(var(--ecIndent, 0ch) + var(--ec-codePadInl) - var(--ecGtrBrdWd));padding-inline-end:var(--ec-codePadInl);text-indent:calc(var(--ecIndent, 0ch) * -1)}.expressive-code .ec-line .code::before,.expressive-code .ec-line .code::after,.expressive-code .ec-line .code :where(*){text-indent:0}.expressive-code .ec-line .code{--ecGtrBrdWd:var(--ec-gtrBrdWd);border-inline-start:var(--ecGtrBrdWd) solid var(--ecLineBrdCol, transparent)}.expressive-code .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.expressive-code .ec-line.mark{--tmLineBgCol:var(--ec-tm-markBg)}.expressive-code .ec-line.mark .code{--ecLineBrdCol:var(--ec-tm-markBrdCol)}.expressive-code .ec-line.ins{--tmLineBgCol:var(--ec-tm-insBg);--tmLabel:var(--ec-tm-insDiffIndContent)}.expressive-code .ec-line.ins .code{--ecLineBrdCol:var(--ec-tm-insBrdCol)}.expressive-code .ec-line.ins .code::before{color:var(--ec-tm-insDiffIndCol)}.expressive-code .ec-line.del{--tmLineBgCol:var(--ec-tm-delBg);--tmLabel:var(--ec-tm-delDiffIndContent)}.expressive-code .ec-line.del .code{--ecLineBrdCol:var(--ec-tm-delBrdCol)}.expressive-code .ec-line.del .code::before{color:var(--ec-tm-delDiffIndCol)}.expressive-code .ec-line.mark,.expressive-code .ec-line.ins,.expressive-code .ec-line.del{background:var(--tmLineBgCol)}.expressive-code .ec-line.mark .code,.expressive-code .ec-line.ins .code,.expressive-code .ec-line.del .code{--ecGtrBrdWd:var(--ec-tm-lineMarkerAccentWd)}.expressive-code .ec-line.mark .code::before,.expressive-code .ec-line.ins .code::before,.expressive-code .ec-line.del .code::before{display:block;position:absolute;left:0;box-sizing:border-box;content:var(--tmLabel, ' ');padding-inline-start:var(--ec-tm-lineDiffIndMargLeft);text-align:center;white-space:pre}.expressive-code .ec-line.mark.tm-label .code::before,.expressive-code .ec-line.ins.tm-label .code::before,.expressive-code .ec-line.del.tm-label .code::before{background:var(--ecLineBrdCol);padding:0 calc(var(--ec-tm-lineMarkerLabelPadInl) + var(--ec-tm-lineMarkerAccentWd)) 0 var(--ec-tm-lineMarkerLabelPadInl);color:var(--ec-tm-lineMarkerLabelCol)}.expressive-code .ec-line mark{--tmInlineBgCol:var(--ec-tm-markBg);--tmInlineBrdCol:var(--ec-tm-markBrdCol)}.expressive-code .ec-line ins{--tmInlineBgCol:var(--ec-tm-insBg);--tmInlineBrdCol:var(--ec-tm-insBrdCol)}.expressive-code .ec-line del{--tmInlineBgCol:var(--ec-tm-delBg);--tmInlineBrdCol:var(--ec-tm-delBrdCol)}.expressive-code .ec-line mark,.expressive-code .ec-line ins,.expressive-code .ec-line del{all:unset;display:inline-block;position:relative;--tmBrdL:var(--ec-tm-inlMarkerBrdWd);--tmBrdR:var(--ec-tm-inlMarkerBrdWd);--tmRadL:var(--ec-tm-inlMarkerBrdRad);--tmRadR:var(--ec-tm-inlMarkerBrdRad);margin-inline:0.025rem;padding-inline:var(--ec-tm-inlMarkerPad);border-radius:var(--tmRadL) var(--tmRadR) var(--tmRadR) var(--tmRadL);background:var(--tmInlineBgCol);background-clip:padding-box}.expressive-code .ec-line mark.open-start,.expressive-code .ec-line ins.open-start,.expressive-code .ec-line del.open-start{margin-inline-start:0;padding-inline-start:0;--tmBrdL:0px;--tmRadL:0}.expressive-code .ec-line mark.open-end,.expressive-code .ec-line ins.open-end,.expressive-code .ec-line del.open-end{margin-inline-end:0;padding-inline-end:0;--tmBrdR:0px;--tmRadR:0}.expressive-code .ec-line mark::before,.expressive-code .ec-line ins::before,.expressive-code .ec-line del::before{content:'';position:absolute;pointer-events:none;display:inline-block;inset:0;border-radius:var(--tmRadL) var(--tmRadR) var(--tmRadR) var(--tmRadL);border:var(--ec-tm-inlMarkerBrdWd) solid var(--tmInlineBrdCol);border-inline-width:var(--tmBrdL) var(--tmBrdR)}.expressive-code .frame{all:unset;position:relative;display:block;--header-border-radius:calc(var(--ec-brdRad) + var(--ec-brdWd));--tab-border-radius:calc(var(--ec-frm-edTabBrdRad) + var(--ec-brdWd));--button-spacing:0.4rem;--code-background:var(--ec-frm-edBg);border-radius:var(--header-border-radius);box-shadow:var(--ec-frm-frameBoxShdCssVal)}.expressive-code .frame .header{display:none;z-index:1;position:relative;border-radius:var(--header-border-radius) var(--header-border-radius) 0 0}.expressive-code .frame.has-title pre,.expressive-code .frame.has-title code,.expressive-code .frame.is-terminal pre,.expressive-code .frame.is-terminal code{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.expressive-code .frame .title:empty:before{content:'\\a0'}.expressive-code .frame.has-title:not(.is-terminal){--button-spacing:calc(1.9rem + 2 * (var(--ec-uiPadBlk) + var(--ec-frm-edActTabIndHt)))}.expressive-code .frame.has-title:not(.is-terminal) .title{position:relative;color:var(--ec-frm-edActTabFg);background:var(--ec-frm-edActTabBg);background-clip:padding-box;margin-block-start:var(--ec-frm-edTabsMargBlkStart);padding:calc(var(--ec-uiPadBlk) + var(--ec-frm-edActTabIndHt)) var(--ec-uiPadInl);border:var(--ec-brdWd) solid var(--ec-frm-edActTabBrdCol);border-radius:var(--tab-border-radius) var(--tab-border-radius) 0 0;border-bottom:none;overflow:hidden}.expressive-code .frame.has-title:not(.is-terminal) .title::after{content:'';position:absolute;pointer-events:none;inset:0;border-top:var(--ec-frm-edActTabIndHt) solid var(--ec-frm-edActTabIndTopCol);border-bottom:var(--ec-frm-edActTabIndHt) solid var(--ec-frm-edActTabIndBtmCol)}.expressive-code .frame.has-title:not(.is-terminal) .header{display:flex;background:linear-gradient(to top, var(--ec-frm-edTabBarBrdBtmCol) var(--ec-brdWd), transparent var(--ec-brdWd)),linear-gradient(var(--ec-frm-edTabBarBg), var(--ec-frm-edTabBarBg));background-repeat:no-repeat;padding-inline-start:var(--ec-frm-edTabsMargInlStart)}.expressive-code .frame.has-title:not(.is-terminal) .header::before{content:'';position:absolute;pointer-events:none;inset:0;border:var(--ec-brdWd) solid var(--ec-frm-edTabBarBrdCol);border-radius:inherit;border-bottom:none}.expressive-code .frame.is-terminal{--button-spacing:calc(1.9rem + var(--ec-brdWd) + 2 * var(--ec-uiPadBlk));--code-background:var(--ec-frm-trmBg)}.expressive-code .frame.is-terminal .header{display:flex;align-items:center;justify-content:center;padding-block:var(--ec-uiPadBlk);padding-block-end:calc(var(--ec-uiPadBlk) + var(--ec-brdWd));position:relative;font-weight:500;letter-spacing:0.025ch;color:var(--ec-frm-trmTtbFg);background:var(--ec-frm-trmTtbBg);border:var(--ec-brdWd) solid var(--ec-brdCol);border-bottom:none}.expressive-code .frame.is-terminal .header::before{content:'';position:absolute;pointer-events:none;left:var(--ec-uiPadInl);width:2.1rem;height:0.56rem;line-height:0;background-color:var(--ec-frm-trmTtbDotsFg);opacity:var(--ec-frm-trmTtbDotsOpa);-webkit-mask-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 60 16' preserveAspectRatio='xMidYMid meet'%3E%3Ccircle cx='8' cy='8' r='8'/%3E%3Ccircle cx='30' cy='8' r='8'/%3E%3Ccircle cx='52' cy='8' r='8'/%3E%3C/svg%3E\");-webkit-mask-repeat:no-repeat;mask-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 60 16' preserveAspectRatio='xMidYMid meet'%3E%3Ccircle cx='8' cy='8' r='8'/%3E%3Ccircle cx='30' cy='8' r='8'/%3E%3Ccircle cx='52' cy='8' r='8'/%3E%3C/svg%3E\");mask-repeat:no-repeat}.expressive-code .frame.is-terminal .header::after{content:'';position:absolute;pointer-events:none;inset:0;border-bottom:var(--ec-brdWd) solid var(--ec-frm-trmTtbBrdBtmCol)}.expressive-code .frame pre{background:var(--code-background)}.expressive-code .copy{display:flex;gap:0.25rem;flex-direction:row;position:absolute;inset-block-start:calc(var(--ec-brdWd) + var(--button-spacing));inset-inline-end:calc(var(--ec-brdWd) + var(--ec-uiPadInl) / 2)}@media (scripting: none){.expressive-code .copy{display:none}}.expressive-code .copy{direction:ltr;unicode-bidi:isolate}.expressive-code .copy button{position:relative;align-self:flex-end;margin:0;padding:0;border:none;border-radius:0.2rem;z-index:1;cursor:pointer;transition-property:opacity, background, border-color;transition-duration:0.2s;transition-timing-function:cubic-bezier(0.25, 0.46, 0.45, 0.94);width:2.5rem;height:2.5rem;background:var(--code-background);opacity:0.75}.expressive-code .copy button div{position:absolute;inset:0;border-radius:inherit;background:var(--ec-frm-inlBtnBg);opacity:var(--ec-frm-inlBtnBgIdleOpa);transition-property:inherit;transition-duration:inherit;transition-timing-function:inherit}.expressive-code .copy button::before{content:'';position:absolute;pointer-events:none;inset:0;border-radius:inherit;border:var(--ec-brdWd) solid var(--ec-frm-inlBtnBrd);opacity:var(--ec-frm-inlBtnBrdOpa)}.expressive-code .copy button::after{content:'';position:absolute;pointer-events:none;inset:0;background-color:var(--ec-frm-inlBtnFg);-webkit-mask-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='1.75'%3E%3Cpath d='M3 19a2 2 0 0 1-1-2V2a2 2 0 0 1 1-1h13a2 2 0 0 1 2 1'/%3E%3Crect x='6' y='5' width='16' height='18' rx='1.5' ry='1.5'/%3E%3C/svg%3E\");-webkit-mask-repeat:no-repeat;mask-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='1.75'%3E%3Cpath d='M3 19a2 2 0 0 1-1-2V2a2 2 0 0 1 1-1h13a2 2 0 0 1 2 1'/%3E%3Crect x='6' y='5' width='16' height='18' rx='1.5' ry='1.5'/%3E%3C/svg%3E\");mask-repeat:no-repeat;margin:0.475rem;line-height:0}.expressive-code .copy button:hover,.expressive-code .copy button:focus:focus-visible{opacity:1}.expressive-code .copy button:hover div,.expressive-code .copy button:focus:focus-visible div{opacity:var(--ec-frm-inlBtnBgHoverOrFocusOpa)}.expressive-code .copy button:active{opacity:1}.expressive-code .copy button:active div{opacity:var(--ec-frm-inlBtnBgActOpa)}.expressive-code .copy .feedback{--tooltip-arrow-size:0.35rem;--tooltip-bg:var(--ec-frm-tooltipSuccessBg);color:var(--ec-frm-tooltipSuccessFg);pointer-events:none;user-select:none;-webkit-user-select:none;position:relative;align-self:center;background-color:var(--tooltip-bg);z-index:99;padding:0.125rem 0.75rem;border-radius:0.2rem;margin-inline-end:var(--tooltip-arrow-size);opacity:0;transition-property:opacity, transform;transition-duration:0.2s;transition-timing-function:ease-in-out;transform:translate3d(0, 0.25rem, 0)}.expressive-code .copy .feedback::after{content:'';position:absolute;pointer-events:none;top:calc(50% - var(--tooltip-arrow-size));inset-inline-end:calc(-2 * (var(--tooltip-arrow-size) - 0.5px));border:var(--tooltip-arrow-size) solid transparent;border-inline-start-color:var(--tooltip-bg)}.expressive-code .copy .feedback.show{opacity:1;transform:translate3d(0, 0, 0)}@media (hover: hover){.expressive-code{}.expressive-code .copy button{opacity:0;width:2rem;height:2rem}.expressive-code .frame:hover .copy button:not(:hover),.expressive-code .frame:focus-within :focus-visible ~ .copy button:not(:hover),.expressive-code .frame .copy .feedback.show ~ button:not(:hover){opacity:0.75}}.expressive-code :nth-child(1 of .ec-line) .code{padding-inline-end:calc(2rem + var(--ec-codePadInl))}.expressive-code .ec-section{position:relative}.expressive-code .ec-section summary{position:relative;font-family:var(--ec-cs-closedFontFml);font-size:var(--ec-cs-closedFontSize);line-height:var(--ec-cs-closedLineHt);user-select:none;-webkit-user-select:none;cursor:pointer;color:var(--ec-cs-closedTextCol);background-color:var(--ec-cs-closedBgCol);--border-color:var(--ec-cs-closedBrdCol);--border-width:var(--ec-cs-closedBrdWd);box-shadow:inset 0 calc(-1 * var(--border-width)) var(--border-color), inset 0 var(--border-width) var(--border-color);margin:var(--ec-cs-closedMarg);padding:0}.expressive-code .ec-section summary::marker{display:inline-block;content:\"\";width:16px;height:16px}.expressive-code .ec-section summary::-webkit-details-marker{display:none}.expressive-code .ec-section summary :is(.expand, .collapse){position:relative;display:inline-block;width:16px;height:16px;vertical-align:text-bottom;opacity:0.75}.expressive-code .ec-section summary :is(.expand, .collapse)::after{content:'';position:absolute;pointer-events:none;inset:0;background-color:var(--ec-cs-closedTextCol);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;line-height:0}.expressive-code .ec-section summary .expand::after{-webkit-mask-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='m8.177.677 2.896 2.896a.25.25 0 0 1-.177.427H8.75v1.25a.75.75 0 0 1-1.5 0V4H5.104a.25.25 0 0 1-.177-.427L7.823.677a.25.25 0 0 1 .354 0ZM7.25 10.75a.75.75 0 0 1 1.5 0V12h2.146a.25.25 0 0 1 .177.427l-2.896 2.896a.25.25 0 0 1-.354 0l-2.896-2.896A.25.25 0 0 1 5.104 12H7.25v-1.25Zm-5-2a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 6 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 12 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z'/%3E%3C/svg%3E\");mask-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='m8.177.677 2.896 2.896a.25.25 0 0 1-.177.427H8.75v1.25a.75.75 0 0 1-1.5 0V4H5.104a.25.25 0 0 1-.177-.427L7.823.677a.25.25 0 0 1 .354 0ZM7.25 10.75a.75.75 0 0 1 1.5 0V12h2.146a.25.25 0 0 1 .177.427l-2.896 2.896a.25.25 0 0 1-.354 0l-2.896-2.896A.25.25 0 0 1 5.104 12H7.25v-1.25Zm-5-2a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 6 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 12 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z'/%3E%3C/svg%3E\");-webkit-print-color-adjust:exact;print-color-adjust:exact}.expressive-code .ec-section summary .collapse{display:none}.expressive-code .ec-section summary .collapse::after{-webkit-mask-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='M10.896 2H8.75V.75a.75.75 0 0 0-1.5 0V2H5.104a.25.25 0 0 0-.177.427l2.896 2.896a.25.25 0 0 0 .354 0l2.896-2.896A.25.25 0 0 0 10.896 2ZM8.75 15.25a.75.75 0 0 1-1.5 0V14H5.104a.25.25 0 0 1-.177-.427l2.896-2.896a.25.25 0 0 1 .354 0l2.896 2.896a.25.25 0 0 1-.177.427H8.75v1.25Zm-6.5-6.5a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 6 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 12 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z'/%3E%3C/svg%3E\");mask-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='M10.896 2H8.75V.75a.75.75 0 0 0-1.5 0V2H5.104a.25.25 0 0 0-.177.427l2.896 2.896a.25.25 0 0 0 .354 0l2.896-2.896A.25.25 0 0 0 10.896 2ZM8.75 15.25a.75.75 0 0 1-1.5 0V14H5.104a.25.25 0 0 1-.177-.427l2.896-2.896a.25.25 0 0 1 .354 0l2.896 2.896a.25.25 0 0 1-.177.427H8.75v1.25Zm-6.5-6.5a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 6 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 12 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z'/%3E%3C/svg%3E\")}.expressive-code .ec-section summary .text{margin-left:1em}.expressive-code .ec-section summary .ec-line .code{padding-block:var(--ec-cs-closedPadBlk);text-indent:0}.expressive-code .ec-section[open],.expressive-code .ec-section details[open] + .content-lines{--border-color:var(--ec-cs-openBrdCol);--border-width:var(--ec-cs-openBrdWd);box-shadow:inset 0 calc(-1 * var(--border-width)) var(--border-color), inset 0 var(--border-width) var(--border-color);padding-inline:var(--ec-cs-openPad);margin-inline:var(--ec-cs-openMarg)}.expressive-code .ec-section.github[open] summary{display:none}.expressive-code .ec-section.github[open]{background-color:var(--ec-cs-openBgCol)}.expressive-code .ec-section:is(.collapsible-start, .collapsible-end){display:flex;flex-direction:column}.expressive-code .ec-section:is(.collapsible-start, .collapsible-end) .content-lines{display:none}.expressive-code .ec-section:is(.collapsible-start, .collapsible-end) details[open] .collapse{display:inline-block}.expressive-code .ec-section:is(.collapsible-start, .collapsible-end) details[open] :is(.expand, .text){display:none}.expressive-code .ec-section:is(.collapsible-start, .collapsible-end) details[open] + .content-lines{display:block;background-color:var(--ec-cs-openBgColCollapsible)}@media print{.expressive-code .ec-section:is(.collapsible-start, .collapsible-end) details[open]{display:none}}.expressive-code .ec-section.collapsible-end{flex-direction:column-reverse}.expressive-code .gutter .ln{display:inline-flex;justify-content:flex-end;align-items:flex-start;box-sizing:content-box;min-width:var(--lnWidth, 2ch);padding-inline:2ch;color:var(--ec-lineNumbers-fg)}.highlight .expressive-code .gutter .ln{color:var(--ec-lineNumbers-hlFg)}:root,:root:not([data-theme='one-light']) .expressive-code[data-theme='one-light']{--ec-brdRad:0.3rem;--ec-brdWd:1.5px;--ec-brdCol:#d4d4d4;--ec-codeFontFml:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono','Courier New',monospace;--ec-codeFontSize:0.85rem;--ec-codeFontWg:400;--ec-codeLineHt:1.65;--ec-codePadBlk:1rem;--ec-codePadInl:1.35rem;--ec-codeBg:#fafafa;--ec-codeFg:#383a42;--ec-codeSelBg:#e5e5e6;--ec-gtrFg:#8a8a8c;--ec-gtrBrdCol:#8a8a8c33;--ec-gtrBrdWd:1.5px;--ec-gtrHlFg:#383a42bc;--ec-uiFontFml:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';--ec-uiFontSize:0.9rem;--ec-uiFontWg:400;--ec-uiLineHt:1.65;--ec-uiPadBlk:0.25rem;--ec-uiPadInl:1rem;--ec-uiSelBg:#dbdbdc;--ec-uiSelFg:#232324;--ec-focusBrd:#526fff;--ec-sbThumbCol:#4e56666e;--ec-sbThumbHoverCol:#5a637597;--ec-tm-lineMarkerAccentMarg:0rem;--ec-tm-lineMarkerAccentWd:0.15rem;--ec-tm-lineMarkerLabelPadInl:0.2rem;--ec-tm-lineMarkerLabelCol:white;--ec-tm-lineDiffIndMargLeft:0.3rem;--ec-tm-inlMarkerBrdWd:1.5px;--ec-tm-inlMarkerBrdRad:0.2rem;--ec-tm-inlMarkerPad:0.15rem;--ec-tm-insDiffIndContent:'+';--ec-tm-delDiffIndContent:'-';--ec-tm-markBg:#9fb6ff80;--ec-tm-markBrdCol:#5570b3d0;--ec-tm-insBg:#94c68480;--ec-tm-insBrdCol:#4e7e41d0;--ec-tm-insDiffIndCol:#3a692fd0;--ec-tm-delBg:#fea09280;--ec-tm-delBrdCol:#ae594fd0;--ec-tm-delDiffIndCol:#97453dd0;--ec-frm-shdCol:#00000028;--ec-frm-frameBoxShdCssVal:0.1rem 0.1rem 0.2rem #00000028;--ec-frm-edActTabBg:#fafafa;--ec-frm-edActTabFg:#121417;--ec-frm-edActTabBrdCol:transparent;--ec-frm-edActTabIndHt:1.5px;--ec-frm-edActTabIndTopCol:null;--ec-frm-edActTabIndBtmCol:null;--ec-frm-edTabsMargInlStart:0;--ec-frm-edTabsMargBlkStart:0;--ec-frm-edTabBrdRad:0.3rem;--ec-frm-edTabBarBg:#eaeaeb;--ec-frm-edTabBarBrdCol:#d4d4d4;--ec-frm-edTabBarBrdBtmCol:transparent;--ec-frm-edBg:#fafafa;--ec-frm-trmTtbFg:#424243;--ec-frm-trmTtbDotsFg:#424243;--ec-frm-trmTtbDotsOpa:0.15;--ec-frm-trmTtbBg:#eaeaeb;--ec-frm-trmTtbBrdBtmCol:#d4d4d4;--ec-frm-trmBg:#fafafa;--ec-frm-inlBtnFg:#383a42;--ec-frm-inlBtnBg:#383a42;--ec-frm-inlBtnBgIdleOpa:0;--ec-frm-inlBtnBgHoverOrFocusOpa:0.2;--ec-frm-inlBtnBgActOpa:0.3;--ec-frm-inlBtnBrd:#383a42;--ec-frm-inlBtnBrdOpa:0.4;--ec-frm-tooltipSuccessBg:#008900;--ec-frm-tooltipSuccessFg:white;--ec-cs-closedBrdWd:0;--ec-cs-closedPadBlk:4px;--ec-cs-closedMarg:0;--ec-cs-closedFontFml:inherit;--ec-cs-closedFontSize:inherit;--ec-cs-closedLineHt:inherit;--ec-cs-closedTextCol:#383a42;--ec-cs-closedBgCol:rgb(84 174 255 / 20%);--ec-cs-closedBrdCol:rgb(84 174 255 / 50%);--ec-cs-openBrdWd:1px;--ec-cs-openPad:0;--ec-cs-openMarg:0;--ec-cs-openBgCol:transparent;--ec-cs-openBgColCollapsible:rgb(84 174 255 / 10%);--ec-cs-openBrdCol:transparent;--ec-lineNumbers-fg:inherit;--ec-lineNumbers-hlFg:inherit}.expressive-code .ec-line :where(span[style^='--']:not([class])),:root:not([data-theme='one-light']) .expressive-code[data-theme='one-light'] .ec-line :where(span[style^='--']:not([class])){color:var(--0, inherit);font-style:var(--0fs, inherit);font-weight:var(--0fw, inherit);text-decoration:var(--0td, inherit)}"])</script><script>self.__next_f.push([1,"1b:T602,try{(()=\u003e{function i(o){let e=document.createElement(\"pre\");Object.assign(e.style,{opacity:\"0\",pointerEvents:\"none\",position:\"absolute\",overflow:\"hidden\",left:\"0\",top:\"0\",width:\"20px\",height:\"20px\",webkitUserSelect:\"auto\",userSelect:\"all\"}),e.ariaHidden=\"true\",e.textContent=o,document.body.appendChild(e);let a=document.createRange();a.selectNode(e);let n=getSelection();if(!n)return!1;n.removeAllRanges(),n.addRange(a);let r=!1;try{r=document.execCommand(\"copy\")}finally{n.removeAllRanges(),document.body.removeChild(e)}return r}async function l(o){let e=o.currentTarget,a=e.dataset,n=!1,r=a.code.replace(/\\u007f/g,`\n`);try{await navigator.clipboard.writeText(r),n=!0}catch{n=i(r)}if(!n||e.parentNode?.querySelector(\".feedback\"))return;let t=document.createElement(\"div\");t.classList.add(\"feedback\"),t.append(a.copied),e.before(t),t.offsetWidth,requestAnimationFrame(()=\u003et?.classList.add(\"show\"));let c=()=\u003e!t||t.classList.remove(\"show\"),d=()=\u003e{!t||parseFloat(getComputedStyle(t).opacity)\u003e0||(t.remove(),t=void 0)};setTimeout(c,1500),setTimeout(d,2500),e.addEventListener(\"blur\",c),t.addEventListener(\"transitioncancel\",d),t.addEventListener(\"transitionend\",d)}function s(o){o.querySelectorAll?.(\".expressive-code .copy button\").forEach(e=\u003ee.addEventListener(\"click\",l))}s(document);var u=new MutationObserver(o=\u003eo.forEach(e=\u003ee.addedNodes.forEach(a=\u003e{s(a)})));u.observe(document.body,{childList:!0,subtree:!0});document.addEventListener(\"astro:page-load\",()=\u003e{s(document)});})();}catch(e){console.error(\"[EC] copy-js-module failed:\",e)}"])</script><script>self.__next_f.push([1,"6:[[\"$\",\"$Lf\",null,{\"title\":\"React 프로젝트 AWS S3, CloudFront에 배포하기\",\"date\":\"$D2020-07-26T23:13:49.000Z\",\"tags\":[\"AWS\"]}],[[\"$\",\"$L10\",null,{\"children\":\"AWS S3\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":[[\"$\",\"$L12\",null,{\"href\":\"https://aws.amazon.com/ko/s3/\",\"children\":\"AWS S3(Simple Storage Service)\"}],\"는 인터넷상 어디서나 원하는 양의 데이터를 저장하고 검색할 수 있도록 구축된 객체 스토리지 서비스이다. 확장성과 가용성이 뛰어나며 모든 S3 객체의 복사본을 자동으로 생성하고 저장하기 때문에 높은 내구성을 보장한다. 사용한 스토리지 만큼 요금이 청구된다.\"]}],\"\\n\",[\"$\",\"$L13\",null,{\"children\":\"객체\"}],\"\\n\",[\"$\",\"$L14\",null,{\"children\":[\"\\n\",[\"$\",\"$L15\",null,{\"children\":\"S3에 저장되는 기본 개체.\"}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":\"S3에 저장된 데이터 하나하나를 객체라고 명명한다.\"}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":[\"데이터와 키, 메타데이터로 구성된다.\",\"\\n\",[\"$\",\"$L14\",null,{\"children\":[\"\\n\",[\"$\",\"$L15\",null,{\"children\":\"키는 객체에 지정한 이름이다. 버킷 내 객체를 고유하게 식별하며 키를 사용하여 객체를 검색한다.\"}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":\"메타데이터는 객체를 설명하는 이름-값 페어의 집합이다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"$L13\",null,{\"children\":\"버킷\"}],\"\\n\",[\"$\",\"$L14\",null,{\"children\":[\"\\n\",[\"$\",\"$L15\",null,{\"children\":[\"S3에 저장된 객체에 대한 컨테이너.\",\"\\n\",[\"$\",\"$L14\",null,{\"children\":[\"\\n\",[\"$\",\"$L15\",null,{\"children\":\"객체가 파일이라면 버킷은 연관된 객체들을 그룹핑한 최상위 디렉토리라고 할 수 있다.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":\"모든 객체는 버킷에 포함된다.\"}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":\"S3에 데이터를 업로드하려면 우선 하나의 AWS 리전에 S3 버킷을 만들어야 한다.\"}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":\"버킷에 포함된 모든 객체에 대해서 일괄적으로 인증과 접속 제한을 걸 수 있다.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"$L10\",null,{\"children\":\"AWS S3로 정적 웹사이트 호스팅 하기\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"S3는 단순히 데이터 저장 뿐만 아니라 여러가지 부가 기능을 제공한다. 그 중 하나가 정적 웹사이트 호스팅이다.\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"S3에 버킷을 생성한 후 해당 버킷을 웹 사이트 호스팅용로 구성한 후 HTML, css, JavaScript 파일 같은 웹 사이트 콘텐츠를 버킷에 업로드하면 S3로 정적 웹 사이트를 호스팅할 수 있다.\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"토이 프로젝트로 작업하고 있는 React 프로젝트가 있는데 이것을 S3에 한번 태워보자.\"}],\"\\n\",[\"$\",\"$L13\",null,{\"children\":\"IAM 권한 추가\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"React 프로젝트를 빌드 한후 s3에 접속하여 웹 호스팅용 버킷에 직접 웹 사이트 콘텐츠들을 직접 업로드 해도 되지만 AWS CLI를 사용하여 스크립트 만으로 간단하게 빌드 및 배포를 완료할 수 있다.\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"AWS CLI로 작업을 하기 위해선 AWS CLI에 액세스 할 수 있도록 IAM 권한이 필요하다. 그래서 IAM 권한 설정을 먼저 해주기로 했다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-iam-1.png\",\"alt\":\"AWS 서비스 메뉴\"}],[\"$\",\"$L18\",null,{\"children\":\"AWS 서비스 메뉴\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"먼저 AWS 서비스 검색창에서 IAM을 검색하거나 서비스 메뉴에서 IAM 항목을 찾아 클릭하여 IAM 대시보드 창으로 이동한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-1.png\",\"alt\":\"IAM 대시보드\"}],[\"$\",\"$L18\",null,{\"children\":\"IAM 대시보드\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"IAM 대시보드 메뉴에서 사용자 항목을 클릭한 후 사용자 추가 버튼을 클릭한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-2.png\",\"alt\":\"IAM 사용자 추가\"}],[\"$\",\"$L18\",null,{\"children\":\"IAM 사용자 추가\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"사용자 이름을 입력한 후 액세스 유형으로 프로그래밍 방식 액세스를 선택한다. 액세스키만 필요하기 때문에 프로그래밍 방식 액세스를 선택하면 된다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-3.png\",\"alt\":\"IAM 사용자 권한 설정\"}],[\"$\",\"$L18\",null,{\"children\":\"IAM 사용자 권한 설정\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"기존 정책 직접 연결 항목을 선택한 후 S3를 검색하여 AmazonS3FullAccess 권한을 선택해준다. AmazonS3FullAccess 권한은 S3에 관한 모든 사용권한을 부여한다.\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"권한 설정이 완료 되었으면 다음 버튼을 눌러준다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-4.png\",\"alt\":\"IAM 사용자 태그 추가\"}],[\"$\",\"$L18\",null,{\"children\":\"IAM 사용자 태그 추가\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"태그 추가는 필수가 아니므로 그냥 넘어가도 된다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-5.png\",\"alt\":\"IAM 사용자 추가 검토\"}],[\"$\",\"$L18\",null,{\"children\":\"IAM 사용자 추가 검토\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"마지막으로 제대로 이름을 입력하고 권한을 부여했는지 한번 더 검토한 후 사용자 버튼을 클릭한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-6.png\",\"alt\":\"IAM 사용자 추가 완료\"}],[\"$\",\"$L18\",null,{\"children\":\"IAM 사용자 추가 완료\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"IAM 사용자 추가가 완료 되었다. 액세스 키 ID와 비밀 액세스 키는 AWS CLI 설정 시 꼭 필요하기 때문에 csv 다운로드로 파일을 저장해놓거나 어딘가에 기록해놓자. 비밀 액세스 키는 절대로 외부에 노출되면 안된다.\"}],\"\\n\",[\"$\",\"$L13\",null,{\"children\":\"AWS CLI 설정\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":[\"이제 AWS CLI 설치 및 설정이 필요하다. AWS CLI는 \",[\"$\",\"$L12\",null,{\"href\":\"https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/install-cliv2.html\",\"children\":\"AWS 설치메뉴얼 문서\"}],\"에서 설치할 수 있다.\"]}],\"\\n\",[\"$\",\"$L19\",null,{\"className\":\"expressive-code\",\"children\":[[\"$\",\"style\",null,{\"children\":\"$1a\"}],[\"$\",\"script\",null,{\"type\":\"module\",\"children\":\"try{(()=\u003e{function a(e){if(!e)return;let t=e.getAttribute(\\\"tabindex\\\")!==null,n=e.scrollWidth\u003ee.clientWidth;n\u0026\u0026!t?e.setAttribute(\\\"tabindex\\\",\\\"0\\\"):!n\u0026\u0026t\u0026\u0026e.removeAttribute(\\\"tabindex\\\")}var u=window.requestIdleCallback||(e=\u003esetTimeout(e,1)),i=window.cancelIdleCallback||clearTimeout;function l(e){let t=new Set,n,r;return new ResizeObserver(c=\u003e{c.forEach(o=\u003et.add(o.target)),n\u0026\u0026clearTimeout(n),r\u0026\u0026i(r),n=setTimeout(()=\u003e{r\u0026\u0026i(r),r=u(()=\u003e{t.forEach(o=\u003ee(o)),t.clear()})},250)})}function d(e,t){e.querySelectorAll?.(\\\".expressive-code pre \u003e code\\\").forEach(n=\u003e{let r=n.parentElement;r\u0026\u0026t.observe(r)})}var s=l(a);d(document,s);var b=new MutationObserver(e=\u003ee.forEach(t=\u003et.addedNodes.forEach(n=\u003e{d(n,s)})));b.observe(document.body,{childList:!0,subtree:!0});document.addEventListener(\\\"astro:page-load\\\",()=\u003e{d(document,s)});})();}catch(e){console.error(\\\"[EC] tabindex-js-module failed:\\\",e)}\"}],[\"$\",\"script\",null,{\"type\":\"module\",\"children\":\"$1b\"}],[\"$\",\"$L16\",null,{\"className\":\"frame\",\"children\":[[\"$\",\"$L18\",null,{\"className\":\"header\"}],[\"$\",\"pre\",null,{\"data-language\":\"plaintext\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"1\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"aws configure --profile IAM 사용자 이름\"}]}]]}]}]}],[\"$\",\"$L19\",null,{\"className\":\"copy\",\"children\":[\"$\",\"button\",null,{\"title\":\"Copy to clipboard\",\"data-copied\":\"Copied!\",\"data-code\":\"aws configure --profile IAM 사용자 이름\",\"children\":[\"$\",\"$L19\",null,{}]}]}]]}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"설치가 완료 되면 해당 명령어를 터미널에 입력하여 CLI를 통하여 IAM 사용자를 추가 해준다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-7.png\",\"alt\":\"AWS CLI 설정\"}],[\"$\",\"$L18\",null,{\"children\":\"AWS CLI 설정\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"AWS Access Key ID와 AWS Secret Access Key는 IAM 사용자 생성 후 얻은 액세스 키 ID와 비밀 액세스 키를 입력하면 된다.\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"Default region name에는 원하는 리전을 적어주면 된다. AP-NORTHEAST-2는 아시아-태평양 서울 리전이다.\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"여기 까지 하면 IAM 권한 설정까지 완료 되었다.\"}],\"\\n\",[\"$\",\"$L13\",null,{\"children\":\"AWS S3 버킷 생성\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"이제 웹 호스팅용 S3 버킷을 생성해야 한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-8.png\",\"alt\":\"AWS 서비스 메뉴\"}],[\"$\",\"$L18\",null,{\"children\":\"AWS 서비스 메뉴\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"AWS 서비스 메뉴에서 S3를 검색하여 S3 메뉴로 이동한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-9.png\",\"alt\":\"S3 버킷 만들기\"}],[\"$\",\"$L18\",null,{\"children\":\"S3 버킷 만들기\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"버킷 만들기 버튼을 클릭한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-10.png\",\"alt\":\"버킷 이름 및 지역 설정\"}],[\"$\",\"$L18\",null,{\"children\":\"버킷 이름 및 지역 설정\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"버킷 이름을 선택해준다. 리전은 기본으로 아시아 태평양(서울)로 되어있는데 원하면 바꿔도 된다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-11.png\",\"alt\":\"버킷 옵션 구성\"}],[\"$\",\"$L18\",null,{\"children\":\"버킷 옵션 구성\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"기본 설정으로 정적 웹 호스팅 환경을 구성할 수 있기 때문에 아무것도 건들지 않고 다음으로 넘어간다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-12.png\",\"alt\":\"버킷 권한 설정\"}],[\"$\",\"$L18\",null,{\"children\":\"버킷 권한 설정\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"기본적으로 Amazon S3은 계정 및 버킷에 대한 퍼블릭 액세스를 차단한다. 하지만 정적 웹 호스팅 환경을 구성하기 위해서는 요 퍼블릭 차단 설정을 해제 해주어야 한다. 모든 퍼블릭 액세스 차단 체크박스를 해제 하고 다음을 눌러준다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-13.png\",\"alt\":\"버킷 만들기 검토\"}],[\"$\",\"$L18\",null,{\"children\":\"버킷 만들기 검토\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"마지막으로 실수한 부분이 있는지 검토를 마친 후 버킷 만들기 버튼을 클릭하면 버킷 생성이 완료 된다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-14.png\",\"alt\":\"S3 버킷 목록\"}],[\"$\",\"$L18\",null,{\"children\":\"S3 버킷 목록\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"S3 버킷 목록으로 돌아오면 방금 생성한 버킷이 보인다. 이 버킷 항목을 눌러 버킷 설정 화면으로 이동한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-15.png\",\"alt\":\"버킷 권한 - 정책 설정 화면\"}],[\"$\",\"$L18\",null,{\"children\":\"버킷 권한 - 정책 설정 화면\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"권한 탭을 클릭한 후 버킷 정책 항목을 클릭한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-16.png\",\"alt\":\"버킷 정책 편집\"}],[\"$\",\"$L18\",null,{\"children\":\"버킷 정책 편집\"}]]}],\"\\n\",[\"$\",\"$L19\",null,{\"className\":\"expressive-code\",\"children\":[\"$\",\"$L16\",null,{\"className\":\"frame\",\"children\":[[\"$\",\"$L18\",null,{\"className\":\"header\"}],[\"$\",\"pre\",null,{\"data-language\":\"plaintext\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"1\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"{\"}]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"2\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"  \"}]}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"\\\"Version\\\":\\\"2012-10-17\\\",\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"3\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"  \"}]}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"\\\"Statement\\\":[\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"4\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"    \"}]}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"{\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"5\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"      \"}]}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"\\\"Sid\\\":\\\"PublicReadGetObject\\\",\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"6\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"      \"}]}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"\\\"Effect\\\":\\\"Allow\\\",\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"7\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"      \"}]}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"\\\"Principal\\\": \\\"*\\\",\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"8\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"      \"}]}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"\\\"Action\\\":[\\\"s3:GetObject\\\"],\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"9\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"      \"}]}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"\\\"Resource\\\":[\\\"arn:aws:s3:::버킷 이름/*\\\"]\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"10\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"    \"}]}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"}\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"11\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"  \"}]}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"]\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"12\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"}\"}]}]]}]]}]}],[\"$\",\"$L19\",null,{\"className\":\"copy\",\"children\":[\"$\",\"button\",null,{\"title\":\"Copy to clipboard\",\"data-copied\":\"Copied!\",\"data-code\":\"{  \\\"Version\\\":\\\"2012-10-17\\\",  \\\"Statement\\\":[    {      \\\"Sid\\\":\\\"PublicReadGetObject\\\",      \\\"Effect\\\":\\\"Allow\\\",      \\\"Principal\\\": \\\"*\\\",      \\\"Action\\\":[\\\"s3:GetObject\\\"],      \\\"Resource\\\":[\\\"arn:aws:s3:::버킷 이름/*\\\"]    }  ]}\",\"children\":[\"$\",\"$L19\",null,{}]}]}]]}]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"웹 사이트에 대한 퍼블릭 읽기 액세스 권한을 부여하기 위해 위의 버킷 정책을 복사한 후 버킷 정책 편집기에 붙여 넣은 후 저장을 눌러준다. Resource에는 버킷 이름을 입력해야 한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-17.png\",\"alt\":\"버킷 속성 화면\"}],[\"$\",\"$L18\",null,{\"children\":\"버킷 속성 화면\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"속성 탭을 선택한 후 정적 웹사이트 호스팅 항목을 클릭한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-18.png\",\"alt\":\"인덱스 문서 구성\"}],[\"$\",\"$L18\",null,{\"children\":\"인덱스 문서 구성\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"S3에 업로드 하려는 웹 콘텐츠 파일들이 React로 작업한 SPA 구조를 가지고 있기 때문에 인덱스 문서와 오류 문서에 index.html을 입력해준다.\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"SPA는 최초 요청에서 index.html을 받은 후 js, css 등 필요한 파일들을 로드하여 앱을 초기화 한다. 때문에 인덱스 주소(/)로 접속한 후 다른 페이지로 이동하면 문제가 없으나 하위 url을 복사해서 접속하거나 인덱스 페이지에서 다른 페이지로 이동 후 새로고침을 하면 해당 url에 맞는 html파일을 찾을 수 없기 때문에 404 페이지가 나오게 된다. 이 문제를 해결하려면 하위 url로 접근해도 index.html을 반환하도록 하게 하면 된다. 그래서 오류 문서에도 index.html을 입력하는 것이다.\"}],\"\\n\",[\"$\",\"$L13\",null,{\"children\":\"배포\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"AWS CLI 설정과 S3 설정이 완료 되었으므로 이제 배포를 하면 된다.\"}],\"\\n\",[\"$\",\"$L19\",null,{\"className\":\"expressive-code\",\"children\":[\"$\",\"$L16\",null,{\"className\":\"frame\",\"children\":[[\"$\",\"$L18\",null,{\"className\":\"header\"}],[\"$\",\"pre\",null,{\"data-language\":\"json\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"1\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":\"  \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#387138\"},\"children\":\"\\\"scripts\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\": {\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"2\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#AF4238\"},\"children\":\"\\\"start\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#387138\"},\"children\":\"\\\"node scripts/start.js\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\",\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"3\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#AF4238\"},\"children\":\"\\\"build\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#387138\"},\"children\":\"\\\"node scripts/build.js\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\",\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"4\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#AF4238\"},\"children\":\"\\\"test\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#387138\"},\"children\":\"\\\"node scripts/test.js\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\",\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"5\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#AF4238\"},\"children\":\"\\\"deploy\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#387138\"},\"children\":\"\\\"aws s3 sync ./build s3://버킷 이름 --profile=IAM 이름\\\"\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"6\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\"  \"}]}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\"},\"}]]}]]}]]}]}],[\"$\",\"$L19\",null,{\"className\":\"copy\",\"children\":[\"$\",\"button\",null,{\"title\":\"Copy to clipboard\",\"data-copied\":\"Copied!\",\"data-code\":\"  \\\"scripts\\\": {    \\\"start\\\": \\\"node scripts/start.js\\\",    \\\"build\\\": \\\"node scripts/build.js\\\",    \\\"test\\\": \\\"node scripts/test.js\\\",    \\\"deploy\\\": \\\"aws s3 sync ./build s3://버킷 이름 --profile=IAM 이름\\\"  },\",\"children\":[\"$\",\"$L19\",null,{}]}]}]]}]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"좀 더 편한 배포를 위해 package.json 파일의 scripts 부분에 deploy 명령어를 추가한다.\"}],\"\\n\",[\"$\",\"$L19\",null,{\"className\":\"expressive-code\",\"children\":[\"$\",\"$L16\",null,{\"className\":\"frame\",\"children\":[[\"$\",\"$L18\",null,{\"className\":\"header\"}],[\"$\",\"pre\",null,{\"data-language\":\"plaintext\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"1\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"yarn build \u0026\u0026 yarn deploy\"}]}]]}]}]}],[\"$\",\"$L19\",null,{\"className\":\"copy\",\"children\":[\"$\",\"button\",null,{\"title\":\"Copy to clipboard\",\"data-copied\":\"Copied!\",\"data-code\":\"yarn build \u0026\u0026 yarn deploy\",\"children\":[\"$\",\"$L19\",null,{}]}]}]]}]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"이제 프로젝트 빌드 후 deploy 명령어로 배포까지 한 후 엔드포인트로 접속해보면 정상적으로 페이지가 뜨는 것을 확인할 수 있다.\"}],\"\\n\",[\"$\",\"$L13\",null,{\"children\":\"CloudFront 설정하기\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"AWS CloudFront란 .html, .css, .js 및 이미지 파일과 같은 정적 및 동적 웹 콘텐츠를 사용자에게 더 빨리 배포하도록 지원하는 CDN 서비스이다.\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"S3로 구축한 정적 웹 사이트에 HTTPS를 사용하려면 CloudFront를 사용해야 한다. HTTPS 지원 뿐만 아니라 CloudFront를 사용하면 커스텀 도메인 사용도 가능하며 S3에 직접 액세스 하는 것 보다 요금도 저렴하다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-19.png\",\"alt\":\"AWS 서비스 메뉴\"}],[\"$\",\"$L18\",null,{\"children\":\"AWS 서비스 메뉴\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"AWS 서비스 메뉴에서 CloudFront를 검색하여 CloudFront 메뉴로 이동한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-20.png\",\"alt\":\"CloudFront Distribution 목록\"}],[\"$\",\"$L18\",null,{\"children\":\"CloudFront Distribution 목록\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"Create Distribution 버튼을 클릭한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-21.png\",\"alt\":\"Create Distribution - step 1\"}],[\"$\",\"$L18\",null,{\"children\":\"Create Distribution - step 1\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"Web 부분에 있는 Get Started 버튼을 클릭한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-22.png\",\"alt\":\"Create Distribution - step 2\"}],[\"$\",\"$L18\",null,{\"children\":\"Create Distribution - step 2\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"Origion Domain Name 항목의 input 박스를 클릭하면 방금 만든 S3 버킷이 나타난다. 해당 S3 항목을 선택한다.\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"Viewer Protocol Policy 항목에서는 Redirect Http to Https 를 선택하고 화면을 쭉 내려서 Create Distribution을 클릭한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-23.png\",\"alt\":\"CloudFront Distribution 목록\"}],[\"$\",\"$L18\",null,{\"children\":\"CloudFront Distribution 목록\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"완료 후 다시 CloudFront Distribition 목록으로 돌아오면 방금 생성한 CloudFront가 보인다. 항목에 있는 Domain Name 값으로 S3에 배포한 React 앱에 접속할 수 있다. Custom Domain도 설정할 수 있으나 적용할 도메인이 없어서 일단 이 과정은 패스 하겠다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-24.png\",\"alt\":\"403 Error\"}],[\"$\",\"$L18\",null,{\"children\":\"403 Error\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"하지만 CloudFront에서 제공한 url로 접속시 403 에러가 뜬다. 하위 url이 아니라 root url로 접속해도 403 error가 뜨는데 왜 그런지는 잘 모르겠다 ㅠ.. 그래도 다행히 해결법은 있다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-25.png\",\"alt\":\"CloudFront Error Page 추가\"}],[\"$\",\"$L18\",null,{\"children\":\"CloudFront Error Page 추가\"}]]}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-26.png\",\"alt\":\"CloudFront Error\"}],[\"$\",\"$L18\",null,{\"children\":\"CloudFront Error\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"HTTP Error Code에서 403을 선택한다. Error Caching Minimum TTL 항목은 CloudFront에서 오리진 서버로부터 오류 응답을 캐싱하려는 최소 시간을 설정하는 항목인데 얼마를 입력해야 좋을지 몰라서 일단 0을 입력했다. Response Page Path는 /index.html, Response Code는 200으로 설정한다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-27.png\",\"alt\":\"CloudFront Distribution 목록\"}],[\"$\",\"$L18\",null,{\"children\":\"CloudFront Distribution 목록\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"403 에러 뿐만 아니라 404 에러도 같은 방법으로 만들어 주었다.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-28.png\",\"alt\":\"CloudFront Distribution 목록\"}],[\"$\",\"$L18\",null,{\"children\":\"CloudFront Distribution 목록\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"약 1분이 지난 후 새로고침을 해보면 접속이 잘 되는 것을 확인할 수 있다.\"}],\"\\n\",[\"$\",\"$L1c\",null,{\"children\":\"CloudFront 캐시 무효화\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"CloudFront로 파일을 배포하면 S3에서 파일을 업데이트 해도 캐시가 남아있기 떄문에 업데이트 이전의 파일을 보여준다. 캐시 유지 시간이 24시이기 때문에 파일을 업데이트 한후 24시간 이후에 업데이트 한 파일이 적용된다.\\n캐시 시간에 상관없이 강제로 파일을 업데이트 하고 싶으면 Invaldiation 작업이 필요하다. 배포할 때 파일도 강제로 업데이트 할 수 있도록 작업을 해보자.\"}],\"\\n\",[\"$\",\"$L16\",null,{\"className\":\"rehype-figure\",\"children\":[[\"$\",\"$L17\",null,{\"src\":\"/images/posts/aws-s3-hosting-29.png\",\"alt\":\"CloudFront Distribution 목록\"}],[\"$\",\"$L18\",null,{\"children\":\"CloudFront Distribution 목록\"}]]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"IAM 항목으로 가서 첫번쨰 단계에 만들었던 IAM 사용자에 CloudFrontFullAccess 권한을 추가해야한다.\"}],\"\\n\",[\"$\",\"$L19\",null,{\"className\":\"expressive-code\",\"children\":[\"$\",\"$L16\",null,{\"className\":\"frame\",\"children\":[[\"$\",\"$L18\",null,{\"className\":\"header\"}],[\"$\",\"pre\",null,{\"data-language\":\"json\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"1\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":\"  \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#387138\"},\"children\":\"\\\"scripts\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\": {\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"2\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#AF4238\"},\"children\":\"\\\"start\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#387138\"},\"children\":\"\\\"node scripts/start.js\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\",\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"3\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#AF4238\"},\"children\":\"\\\"build\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#387138\"},\"children\":\"\\\"node scripts/build.js\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\",\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"4\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#AF4238\"},\"children\":\"\\\"test\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#387138\"},\"children\":\"\\\"node scripts/test.js\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\",\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"5\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#AF4238\"},\"children\":\"\\\"deploy\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#387138\"},\"children\":\"\\\"aws s3 sync ./build s3://버킷 이름 --profile=IAM 이름\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\",\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"6\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":\"    \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#AF4238\"},\"children\":\"\\\"invalidate\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#387138\"},\"children\":\"\\\"aws cloudfront create-invalidation --profile=위에서 생성한 iam 사용자 이름--distribution-id 위에서 생성한 ColudFront distribution Id --paths / /index.html /error.html /service-worker.js /manifest.json /favicon.ico\\\"\"}]]}]]}],[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"7\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[[\"$\",\"span\",null,{\"className\":\"indent\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\"  \"}]}],[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383A42\"},\"children\":\"},\"}]]}]]}]]}]}],[\"$\",\"$L19\",null,{\"className\":\"copy\",\"children\":[\"$\",\"button\",null,{\"title\":\"Copy to clipboard\",\"data-copied\":\"Copied!\",\"data-code\":\"  \\\"scripts\\\": {    \\\"start\\\": \\\"node scripts/start.js\\\",    \\\"build\\\": \\\"node scripts/build.js\\\",    \\\"test\\\": \\\"node scripts/test.js\\\",    \\\"deploy\\\": \\\"aws s3 sync ./build s3://버킷 이름 --profile=IAM 이름\\\",    \\\"invalidate\\\": \\\"aws cloudfront create-invalidation --profile=위에서 생성한 iam 사용자 이름--distribution-id 위에서 생성한 ColudFront distribution Id --paths / /index.html /error.html /service-worker.js /manifest.json /favicon.ico\\\"  },\",\"children\":[\"$\",\"$L19\",null,{}]}]}]]}]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"s3에 배포한 React 프로젝트의 package.json 파일의 scripts 항목에 invalidate 명령어를 추가 해준다.\"}],\"\\n\",[\"$\",\"$L19\",null,{\"className\":\"expressive-code\",\"children\":[\"$\",\"$L16\",null,{\"className\":\"frame\",\"children\":[[\"$\",\"$L18\",null,{\"className\":\"header\"}],[\"$\",\"pre\",null,{\"data-language\":\"plaintext\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"$L19\",null,{\"className\":\"ec-line\",\"children\":[[\"$\",\"$L19\",null,{\"className\":\"gutter\",\"children\":[\"$\",\"$L19\",null,{\"className\":\"ln\",\"aria-hidden\":\"true\",\"children\":\"1\"}]}],[\"$\",\"$L19\",null,{\"className\":\"code\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--0\":\"#383a42\"},\"children\":\"yarn build \u0026\u0026 yarn deploy \u0026\u0026 yarn invalidate\"}]}]]}]}]}],[\"$\",\"$L19\",null,{\"className\":\"copy\",\"children\":[\"$\",\"button\",null,{\"title\":\"Copy to clipboard\",\"data-copied\":\"Copied!\",\"data-code\":\"yarn build \u0026\u0026 yarn deploy \u0026\u0026 yarn invalidate\",\"children\":[\"$\",\"$L19\",null,{}]}]}]]}]}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"이재 배포할 때 invalidate 명령어를 같이 사용하주면 캐시가 무효화 되면서 새로운 배포 파일이 적용 된다.\"}],\"\\n\",[\"$\",\"$L10\",null,{\"children\":\"마무리\"}],\"\\n\",[\"$\",\"$L11\",null,{\"children\":\"S3에 React 프로젝트를 업로드 하여 정적 웹 호스팅을 하고 CloudFront 까지 적용해봤다. 나중에 젠킨스를 사용하여 자동 배포까지 적용해 보고 싶다. 부지런히 공부하고 실습해야겠다.\"}],\"\\n\",[\"$\",\"$L10\",null,{\"children\":\"Reference\"}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"$L14\",null,{\"children\":[\"\\n\",[\"$\",\"$L15\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"https://aws.amazon.com/ko/s3/\",\"children\":\"Amazon S3\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/dev/Welcome.html\",\"children\":\"Amazon S3이란 무엇입니까?\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"https://www.44bits.io/ko/keyword/amazon-web-service#%EC%95%84%EB%A7%88%EC%A1%B4-s3s3-amazon-simple-storage-service\",\"children\":\"아마존 S3(S3, Amazon Simple Storage Service)\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"https://opentutorials.org/course/608/3006\",\"children\":\"Simple Storage Service(S3)\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/dev/WebsiteHosting.html\",\"children\":\"Amazon S3 정적 웹 사이트 호스팅\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"https://react-etc.vlpt.us/08.deploy-s3.html\",\"children\":\"리액트 앱 AWS S3, CloudFront 에 배포하기\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"https://blog.outsider.ne.kr/1394\",\"children\":\"pushState를 사용하는 SPA를 S3와 CloudFront로 서비스하기\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"https://jaroinside.tistory.com/46\",\"children\":\"SPA를 AWS S3 정적 웹 호스팅시 문제 해결\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"https://musma.github.io/2019/06/29/publish-static-assets-over-https-using-cloudfront.html\",\"children\":\"CloudFront를 이용해 HTTPS로 정적 리소스 배포하기\"}]}],\"\\n\",[\"$\",\"$L15\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"https://velog.io/@_junukim/CloudFront%EB%A1%9C-React%EC%95%B1-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0-2\",\"children\":\"CloudFront로 React앱 배포하기 - 2\"}]}],\"\\n\"]}],\"\\n\"]}]]]\n"])</script></body></html>